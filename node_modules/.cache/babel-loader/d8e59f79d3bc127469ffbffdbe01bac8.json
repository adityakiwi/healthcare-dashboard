{"ast":null,"code":"import _slicedToArray from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from'react';import clsx from'clsx';import GroupedBarChart from'./GroupedBarChart';import{Box,Button,Card,CardContent,CardHeader,Divider,useTheme,makeStyles,colors,CardActions}from'@material-ui/core';import ArrowDropDownIcon from'@material-ui/icons/ArrowDropDown';import ArrowRightIcon from'@material-ui/icons/ArrowRight';import CircularProgress from'@material-ui/core/CircularProgress';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import FormControlLabel from'@material-ui/core/FormControlLabel';import Switch from'@material-ui/core/Switch';import StackedBarChart from'./StackedBarChart';import{LocalConvenienceStoreOutlined}from'@material-ui/icons';var useStyles=makeStyles(function(){return{root:{}};});function stackedbarP(dataset,selector){console.log(\"localdata\",dataset);var arr=[];for(var i=0;i<dataset.length;i++){for(var j=0;j<dataset[i].values.length;j++){var o={};var diagnosis=dataset[i].diagnosis;var distribution=dataset[i].values[j].distribution;var dist=dataset[i].values[j].distribution;var raw=dist.split(\"(\")[1];var bare=dist.split(\"(\")[0];var key=bare.trim();var gender=raw.split(\")\")[0];var value=dataset[i].values[j].value;o.gender=gender;o.disease=diagnosis;o.total=value;o[key]=value;arr.push(o);}}console.log(arr,\"arr\");console.log(selector,\"selector\");var arr_filtered=arr.filter(function(e){return e.gender===selector;});var output=[];arr_filtered.forEach(function(item){var exist=output.filter(function(v,i){return v.disease==item.disease;});console.log(\"exist\",exist);if(exist.length){var index=output.indexOf(exist[0]);var total=output[index].total+item.total;console.log(\"index\",index);console.log(\"total\",total);Object.assign(output[index],item);output[index].total=total;}else{if(typeof item.value=='string'){console.log(\"string\",item.value);item.value=[item.value];}console.log(\"item\",item);output.push(item);}});output.sort(function(a,b){return b.total-a.total;});console.log(\"output\",output);return output;}var DiagnosesStackedBarChart=function DiagnosesStackedBarChart(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,[\"className\"]);var classes=useStyles();var theme=useTheme();var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState('M'),_React$useState6=_slicedToArray(_React$useState5,2),selector=_React$useState6[0],setSelector=_React$useState6[1];var _React$useState7=React.useState({logarithmic:false}),_React$useState8=_slicedToArray(_React$useState7,2),scale=_React$useState8[0],setScale=_React$useState8[1];console.log(selector);React.useEffect(function(){var apiUrl='https://visualizing-healthcare-data.wm.r.appspot.com/data/insurance/gender';fetch(apiUrl).then(function(response){return response.json();}).then(function(result){return stackedbarP(result,selector);}).then(function(result){setData(result);setLoading(false);});},[selector]);console.log(data);var handleCategory=function handleCategory(event){setLoading(true);setSelector(event.target.value);};// const handleScale = (event) => {\n//     setScale({ ...scale, [event.target.name]: event.target.checked });\n// };\nreturn/*#__PURE__*/React.createElement(Card,Object.assign({className:clsx(classes.root,className)},rest),/*#__PURE__*/React.createElement(CardHeader,{action:/*#__PURE__*/React.createElement(Select,{endIcon:/*#__PURE__*/React.createElement(ArrowDropDownIcon,null),value:selector,onChange:handleCategory},/*#__PURE__*/React.createElement(MenuItem,{value:\"M\"},\"Male\"),/*#__PURE__*/React.createElement(MenuItem,{value:\"F\"},\"Female\")),title:\"Q5 Insurance Stacked Bar\"}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardContent,{id:\"sb\"},!loading?/*#__PURE__*/React.createElement(StackedBarChart,{data:data,selector:selector,scale:scale,size:[1200,800]}):/*#__PURE__*/React.createElement(CircularProgress,null)),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"flex-end\",p:2}));};export default DiagnosesStackedBarChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/DiagnosesStackedBarChart.js"],"names":["React","clsx","GroupedBarChart","Box","Button","Card","CardContent","CardHeader","Divider","useTheme","makeStyles","colors","CardActions","ArrowDropDownIcon","ArrowRightIcon","CircularProgress","Select","MenuItem","FormControlLabel","Switch","StackedBarChart","LocalConvenienceStoreOutlined","useStyles","root","stackedbarP","dataset","selector","console","log","arr","i","length","j","values","o","diagnosis","distribution","dist","raw","split","bare","key","trim","gender","value","disease","total","push","arr_filtered","filter","e","output","forEach","item","exist","v","index","indexOf","Object","assign","sort","a","b","DiagnosesStackedBarChart","className","rest","classes","theme","useState","loading","setLoading","data","setData","setSelector","logarithmic","scale","setScale","useEffect","apiUrl","fetch","then","response","json","result","handleCategory","event","target"],"mappings":"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","sourcesContent":["import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport GroupedBarChart from './GroupedBarChart';\nimport {\n    Box,\n    Button,\n    Card,\n    CardContent,\n    CardHeader,\n    Divider,\n    useTheme,\n    makeStyles,\n    colors,\n    CardActions\n} from '@material-ui/core';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\nimport StackedBarChart from './StackedBarChart'\nimport { LocalConvenienceStoreOutlined } from '@material-ui/icons';\n\nconst useStyles = makeStyles(() => ({\n    root: {}\n}));\n\nfunction stackedbarP(dataset, selector) {\n    console.log(\"localdata\", dataset)\n    let arr = []\n    for (var i = 0; i < dataset.length; i++) {\n        for (var j = 0; j < dataset[i].values.length; j++) {\n            let o = {}\n            let diagnosis = dataset[i].diagnosis\n            let distribution = dataset[i].values[j].distribution\n            let dist = dataset[i].values[j].distribution\n            let raw = dist.split(\"(\")[1]\n            let bare = dist.split(\"(\")[0]\n            let key = bare.trim()\n            let gender = raw.split(\")\")[0]\n            let value = dataset[i].values[j].value\n            o.gender = gender\n            o.disease = diagnosis\n            o.total = value;\n            o[key] = value\n            arr.push(o)\n        }\n    }\n    console.log(arr,\"arr\")\n    console.log(selector,\"selector\")\n    let arr_filtered = arr.filter(function (e) {\n        return e.gender === selector;\n    });\n\n    let output = []\n    arr_filtered.forEach(function (item) {\n        var exist = output.filter(function (v, i) {\n            return v.disease == item.disease\n        });\n        console.log(\"exist\", exist)\n        if (exist.length) {\n            var index = output.indexOf(exist[0]);\n            var total = output[index].total + item.total;\n            console.log(\"index\", index)\n            console.log(\"total\", total)\n            Object.assign(output[index], item);\n            output[index].total = total;\n        } else {\n            if (typeof item.value == 'string') {\n                console.log(\"string\", item.value)\n                item.value = [item.value];\n            }\n            console.log(\"item\", item)\n            output.push(item);\n        }\n    });\n    output.sort(function (a, b) { return b.total - a.total; });\n    console.log(\"output\",output)\n    return output\n}\n\nconst DiagnosesStackedBarChart = ({ className, ...rest }) => {\n    const classes = useStyles();\n    const theme = useTheme();\n\n    let [loading, setLoading] = React.useState(true);\n    let [data, setData] = React.useState([]);\n    let [selector, setSelector] = React.useState('M');\n    let [scale, setScale] = React.useState({\n        logarithmic: false,\n    });\n\n    console.log(selector)\n    React.useEffect(() => {\n        let apiUrl = 'https://visualizing-healthcare-data.wm.r.appspot.com/data/insurance/gender';\n        fetch(apiUrl)\n            .then((response) => response.json())\n            .then(result => stackedbarP(result,selector))\n            .then(result => {\n                setData(result);\n                setLoading(false);\n            })\n    }, [selector])\n    console.log(data)\n\n    const handleCategory = (event) => {\n        setLoading(true)\n        setSelector(event.target.value);\n    };\n\n    // const handleScale = (event) => {\n    //     setScale({ ...scale, [event.target.name]: event.target.checked });\n    // };\n\n    return (\n        <Card\n            className={clsx(classes.root, className)}\n            {...rest}\n        >\n            <CardHeader\n                action={(\n                    <Select\n                        endIcon={<ArrowDropDownIcon />}\n                        value={selector}\n                        onChange={handleCategory}\n                    >\n                        <MenuItem value={\"M\"}>Male</MenuItem>\n                        <MenuItem value={\"F\"}>Female</MenuItem>\n                    </Select>\n                )}\n                title=\"Q5 Insurance Stacked Bar\"\n            />\n            <Divider />\n            <CardContent id={\"sb\"}>\n                {/* <Box\n          id={\"gbc\"}\n          height={400}\n          position=\"relative\"\n        > */}\n                {!loading ? <StackedBarChart data={data} selector={selector} scale={scale} size={[1200, 800]} /> : <CircularProgress />}\n                {/* </Box> */}\n            </CardContent>\n            <Divider />\n            <Box\n                display=\"flex\"\n                justifyContent=\"flex-end\"\n                p={2}\n            >\n                {/* <Button\n          color=\"primary\"\n          endIcon={<ArrowRightIcon />}\n          size=\"small\"\n          variant=\"text\"\n        >\n          Overview\n        </Button> */}\n            </Box>\n        </Card>\n    );\n};\n\nDiagnosesStackedBarChart.propTypes = {\n    className: PropTypes.string\n};\n\nexport default DiagnosesStackedBarChart;\n"]},"metadata":{},"sourceType":"module"}