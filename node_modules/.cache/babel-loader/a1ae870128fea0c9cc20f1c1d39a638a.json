{"ast":null,"code":"var _jsxFileName = \"/Users/chia/Desktop/USF/senior team/dashboard/src/views/dashboard/DashboardView/d3/BubbleChart.js\";\nimport React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\nimport * as d3l from 'd3-svg-legend';\n\nclass BubbleChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.removeExistingBubbles = this.removeExistingBubbles.bind(this);\n    this.createBarChart = this.createBarChart.bind(this);\n    this.state = {\n      svg: null,\n      width: null,\n      height: null\n    };\n  }\n\n  componentDidMount() {\n    const owidth = this.props.size[0];\n    const oheight = this.props.size[1];\n    var margin = {\n      top: 20,\n      right: 20,\n      bottom: 70,\n      left: 100\n    },\n        width = owidth - margin.left - margin.right,\n        height = oheight - margin.top - margin.bottom;\n    const svg = d3.select(\"body\").select(\"#bc\").select(\"svg\").attr(\"width\", width).attr(\"height\", height).attr(\"class\", \"bubble\");\n    this.setState({\n      svg\n    });\n    this.setState({\n      width\n    });\n    this.setState({\n      height\n    });\n  }\n\n  componentDidUpdate() {\n    this.removeExistingBubbles();\n    this.createBarChart();\n  }\n\n  midpoint(range) {\n    return range[0] + (range[1] - range[0]) / 2.0;\n  }\n\n  removeExistingBubbles() {\n    const {\n      svg\n    } = this.state;\n    svg.selectAll(\"*\").remove();\n  }\n\n  createBarChart() {\n    const {\n      svg\n    } = this.state;\n    const {\n      width\n    } = this.state;\n    const {\n      height\n    } = this.state;\n    const rawdata = this.props.data;\n    console.log(rawdata);\n    let dataset = {\n      \"children\": []\n    };\n    console.log(dataset);\n    console.log(typeof dataset);\n\n    for (var val of rawdata) {\n      let key = Object.values(val)[0];\n      let theval = Object.values(Object.values(val)[1][0])[0];\n      dataset[\"children\"].push({\n        Name: key,\n        Count: theval\n      });\n    }\n\n    console.log(dataset);\n    var diameter = 300;\n    var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\", \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\", \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\", \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n    var bubble = d3.pack(dataset).size([diameter, diameter]).padding(1.5);\n    var nodes = d3.hierarchy(dataset).sum(function (d) {\n      return d.Count;\n    });\n    var diameter = 600;\n    var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\", \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\", \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\", \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n    var bubble = d3.pack(dataset).size([width, height]).padding(1.5);\n    var nodes = d3.hierarchy(dataset).sum(function (d) {\n      return d.Count;\n    });\n    var node = svg.selectAll(\".node\").data(bubble(nodes).descendants()).enter().filter(function (d) {\n      return !d.children;\n    }).append(\"g\").attr(\"class\", function (d) {\n      {\n        console.log(d.data.Name);\n      }\n      return d.data.name;\n    }).attr(\"transform\", function (d) {\n      return \"translate(\" + d.x + \",\" + d.y + \")\";\n    });\n    var tooltip = d3.select(\"body\").select(\"#bc\").append(\"div\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"color\", \"white\").style(\"padding\", \"8px\").style(\"background-color\", \"rgba(0, 0, 0, 0.75)\").style(\"border-radius\", \"6px\").style(\"font\", \"12px sans-serif\").text(\"tooltip\");\n    var colors = [\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\", \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\", \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\", \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"];\n    node.append(\"circle\").attr(\"r\", function (d) {\n      return d.r;\n    }).style(\"fill\", function (d, i) {\n      return colors[i];\n    });\n    node.append(\"text\").attr(\"dy\", \".2em\").style(\"text-anchor\", \"middle\").text(function (d) {\n      return d.data.Name.substring(0, d.r / 3);\n    }).attr(\"font-family\", \"sans-serif\").attr(\"font-size\", function (d) {\n      return d.r / 5;\n    }).attr(\"fill\", \"white\");\n    node.append(\"text\").attr(\"dy\", \"1.3em\").style(\"text-anchor\", \"middle\").text(function (d) {\n      return d.data.Count;\n    }).attr(\"font-family\", \"Gill Sans\", \"Gill Sans MT\").attr(\"font-size\", function (d) {\n      return d.r / 5;\n    }).attr(\"fill\", \"white\");\n    node.on(\"mouseover\", function (d) {\n      tooltip.text(d.path[0].__data__.data.Name + \": \" + d.path[0].__data__.data.Count);\n      tooltip.style(\"visibility\", \"visible\");\n    }).on(\"mousemove\", function (event, d) {\n      return tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n    }).on(\"mouseout\", function () {\n      return tooltip.style(\"visibility\", \"hidden\");\n    }); // svg.selectAll(\"circle\").on(\"click\", clicked);\n    // function clicked(event, d) {\n    //     if (event.defaultPrevented) return; // dragged\n    //     d3.select(this).transition()\n    //         .attr(console.log(this))\n    //         .attr(\"fill\", \"black\")\n    //         .attr(\"r\", d.r * 2)\n    //         .transition()\n    //         .attr(\"r\", d.r)\n    //         .attr(\"fill\", d3.schemeCategory10[d.index % 10]);\n    // }\n\n    var zoom = d3.zoom().scaleExtent([1, 8]).on('zoom', function (event) {\n      svg.attr('transform', event.transform);\n    });\n    svg.call(zoom);\n\n    function mouseover() {\n      d3.select(this).attr(\"opacity\", .5);\n    }\n\n    function mouseout() {\n      d3.select(this).attr(\"opacity\", 1);\n    }\n\n    function zoomed({\n      transform\n    }) {\n      nodes.attr(\"transform\", transform);\n    }\n\n    var legend = d3l.legendColor().scale(color).shape('circle').orient('vertical').labelOffset(5);\n    svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", \"translate(\" + (width - 100) + \", \" + 20 + \")\");\n    svg.select(\".legend\").call(legend);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nexport default BubbleChart;","map":{"version":3,"sources":["/Users/chia/Desktop/USF/senior team/dashboard/src/views/dashboard/DashboardView/d3/BubbleChart.js"],"names":["React","d3","range","d3l","BubbleChart","Component","constructor","props","removeExistingBubbles","bind","createBarChart","state","svg","width","height","componentDidMount","owidth","size","oheight","margin","top","right","bottom","left","select","attr","setState","componentDidUpdate","midpoint","selectAll","remove","rawdata","data","console","log","dataset","val","key","Object","values","theval","push","Name","Count","diameter","color","scaleOrdinal","bubble","pack","padding","nodes","hierarchy","sum","d","node","descendants","enter","filter","children","append","name","x","y","tooltip","style","text","colors","r","i","substring","on","path","__data__","event","pageY","pageX","zoom","scaleExtent","transform","call","mouseover","mouseout","zoomed","legend","legendColor","scale","shape","orient","labelOffset","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;AACA,SAASC,KAAT,QAAsB,IAAtB;AACA,OAAO,KAAKC,GAAZ,MAAqB,eAArB;;AAGA,MAAMC,WAAN,SAA0BJ,KAAK,CAACK,SAAhC,CAA0C;AACtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BC,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKE,KAAL,GAAa;AACTC,MAAAA,GAAG,EAAE,IADI;AAETC,MAAAA,KAAK,EAAE,IAFE;AAGTC,MAAAA,MAAM,EAAE;AAHC,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,UAAMC,MAAM,GAAG,KAAKT,KAAL,CAAWU,IAAX,CAAgB,CAAhB,CAAf;AACA,UAAMC,OAAO,GAAG,KAAKX,KAAL,CAAWU,IAAX,CAAgB,CAAhB,CAAhB;AAEA,QAAIE,MAAM,GAAG;AAAEC,MAAAA,GAAG,EAAE,EAAP;AAAWC,MAAAA,KAAK,EAAE,EAAlB;AAAsBC,MAAAA,MAAM,EAAE,EAA9B;AAAkCC,MAAAA,IAAI,EAAE;AAAxC,KAAb;AAAA,QACIV,KAAK,GAAGG,MAAM,GAAGG,MAAM,CAACI,IAAhB,GAAuBJ,MAAM,CAACE,KAD1C;AAAA,QAEIP,MAAM,GAAGI,OAAO,GAAGC,MAAM,CAACC,GAAjB,GAAuBD,MAAM,CAACG,MAF3C;AAIA,UAAMV,GAAG,GAAGX,EAAE,CAACuB,MAAH,CAAU,MAAV,EAAkBA,MAAlB,CAAyB,KAAzB,EAAgCA,MAAhC,CAAuC,KAAvC,EACPC,IADO,CACF,OADE,EACOZ,KADP,EAEPY,IAFO,CAEF,QAFE,EAEQX,MAFR,EAGPW,IAHO,CAGF,OAHE,EAGO,QAHP,CAAZ;AAKA,SAAKC,QAAL,CAAc;AAAEd,MAAAA;AAAF,KAAd;AACA,SAAKc,QAAL,CAAc;AAAEb,MAAAA;AAAF,KAAd;AACA,SAAKa,QAAL,CAAc;AAAEZ,MAAAA;AAAF,KAAd;AACH;;AAEDa,EAAAA,kBAAkB,GAAG;AACjB,SAAKnB,qBAAL;AACA,SAAKE,cAAL;AACH;;AAEDkB,EAAAA,QAAQ,CAAC1B,KAAD,EAAQ;AACZ,WAAOA,KAAK,CAAC,CAAD,CAAL,GAAW,CAACA,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAjB,IAAwB,GAA1C;AACH;;AAEDM,EAAAA,qBAAqB,GAAG;AACpB,UAAM;AAAEI,MAAAA;AAAF,QAAU,KAAKD,KAArB;AACAC,IAAAA,GAAG,CAACiB,SAAJ,CAAc,GAAd,EAAmBC,MAAnB;AACH;;AAEDpB,EAAAA,cAAc,GAAG;AACb,UAAM;AAAEE,MAAAA;AAAF,QAAU,KAAKD,KAArB;AACA,UAAM;AAAEE,MAAAA;AAAF,QAAY,KAAKF,KAAvB;AACA,UAAM;AAAEG,MAAAA;AAAF,QAAa,KAAKH,KAAxB;AAEA,UAAMoB,OAAO,GAAG,KAAKxB,KAAL,CAAWyB,IAA3B;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AAEA,QAAII,OAAO,GAAG;AACV,kBAAY;AADF,KAAd;AAIAF,IAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AACAF,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAQC,OAApB;;AAEA,SAAK,IAAIC,GAAT,IAAgBL,OAAhB,EAAyB;AACrB,UAAIM,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAcH,GAAd,EAAmB,CAAnB,CAAV;AACA,UAAII,MAAM,GAAGF,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAcH,GAAd,EAAmB,CAAnB,EAAsB,CAAtB,CAAd,EAAwC,CAAxC,CAAb;AAEAD,MAAAA,OAAO,CAAC,UAAD,CAAP,CAAoBM,IAApB,CAAyB;AACrBC,QAAAA,IAAI,EAAEL,GADe;AAErBM,QAAAA,KAAK,EAAEH;AAFc,OAAzB;AAIH;;AACDP,IAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AAEA,QAAIS,QAAQ,GAAG,GAAf;AACA,QAAIC,KAAK,GAAG5C,EAAE,CAAC6C,YAAH,GAAkB5C,KAAlB,CAAwB,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EACtB,SADsB,EACX,SADW,EACA,SADA,EACW,SADX,EACsB,SADtB,EAEtB,SAFsB,EAEX,SAFW,EAEA,SAFA,EAEW,SAFX,EAEsB,SAFtB,EAGtB,SAHsB,EAGX,SAHW,EAGA,SAHA,EAGW,SAHX,EAGsB,SAHtB,CAAxB,CAAZ;AAKA,QAAI6C,MAAM,GAAG9C,EAAE,CAAC+C,IAAH,CAAQb,OAAR,EACRlB,IADQ,CACH,CAAC2B,QAAD,EAAWA,QAAX,CADG,EAERK,OAFQ,CAEA,GAFA,CAAb;AAIA,QAAIC,KAAK,GAAGjD,EAAE,CAACkD,SAAH,CAAahB,OAAb,EACPiB,GADO,CACH,UAAUC,CAAV,EAAa;AAAE,aAAOA,CAAC,CAACV,KAAT;AAAiB,KAD7B,CAAZ;AAGA,QAAIC,QAAQ,GAAG,GAAf;AACA,QAAIC,KAAK,GAAG5C,EAAE,CAAC6C,YAAH,GAAkB5C,KAAlB,CAAwB,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EACtB,SADsB,EACX,SADW,EACA,SADA,EACW,SADX,EACsB,SADtB,EAEtB,SAFsB,EAEX,SAFW,EAEA,SAFA,EAEW,SAFX,EAEsB,SAFtB,EAGtB,SAHsB,EAGX,SAHW,EAGA,SAHA,EAGW,SAHX,EAGsB,SAHtB,CAAxB,CAAZ;AAKA,QAAI6C,MAAM,GAAG9C,EAAE,CAAC+C,IAAH,CAAQb,OAAR,EACRlB,IADQ,CACH,CAACJ,KAAD,EAAQC,MAAR,CADG,EAERmC,OAFQ,CAEA,GAFA,CAAb;AAIA,QAAIC,KAAK,GAAGjD,EAAE,CAACkD,SAAH,CAAahB,OAAb,EACPiB,GADO,CACH,UAAUC,CAAV,EAAa;AAAE,aAAOA,CAAC,CAACV,KAAT;AAAiB,KAD7B,CAAZ;AAGA,QAAIW,IAAI,GAAG1C,GAAG,CAACiB,SAAJ,CAAc,OAAd,EACNG,IADM,CACDe,MAAM,CAACG,KAAD,CAAN,CAAcK,WAAd,EADC,EAENC,KAFM,GAGNC,MAHM,CAGC,UAAUJ,CAAV,EAAa;AACjB,aAAO,CAACA,CAAC,CAACK,QAAV;AACH,KALM,EAMNC,MANM,CAMC,GAND,EAONlC,IAPM,CAOD,OAPC,EAOQ,UAAU4B,CAAV,EAAa;AACxB;AAACpB,QAAAA,OAAO,CAACC,GAAR,CAAYmB,CAAC,CAACrB,IAAF,CAAOU,IAAnB;AAAyB;AAAA,aAAOW,CAAC,CAACrB,IAAF,CAAO4B,IAAd;AAC7B,KATM,EAUNnC,IAVM,CAUD,WAVC,EAUY,UAAU4B,CAAV,EAAa;AAC5B,aAAO,eAAeA,CAAC,CAACQ,CAAjB,GAAqB,GAArB,GAA2BR,CAAC,CAACS,CAA7B,GAAiC,GAAxC;AACH,KAZM,CAAX;AAcA,QAAIC,OAAO,GAAG9D,EAAE,CAACuB,MAAH,CAAU,MAAV,EAAkBA,MAAlB,CAAyB,KAAzB,EACTmC,MADS,CACF,KADE,EAETK,KAFS,CAEH,UAFG,EAES,UAFT,EAGTA,KAHS,CAGH,SAHG,EAGQ,IAHR,EAITA,KAJS,CAIH,YAJG,EAIW,QAJX,EAKTA,KALS,CAKH,OALG,EAKM,OALN,EAMTA,KANS,CAMH,SANG,EAMQ,KANR,EAOTA,KAPS,CAOH,kBAPG,EAOiB,qBAPjB,EAQTA,KARS,CAQH,eARG,EAQc,KARd,EASTA,KATS,CASH,MATG,EASK,iBATL,EAUTC,IAVS,CAUJ,SAVI,CAAd;AAYA,QAAIC,MAAM,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EACC,SADD,EACY,SADZ,EACuB,SADvB,EACkC,SADlC,EAC6C,SAD7C,EAEE,SAFF,EAEa,SAFb,EAEwB,SAFxB,EAEmC,SAFnC,EAE8C,SAF9C,EAGE,SAHF,EAGa,SAHb,EAGwB,SAHxB,EAGmC,SAHnC,EAG8C,SAH9C,CAAb;AAIAZ,IAAAA,IAAI,CAACK,MAAL,CAAY,QAAZ,EACKlC,IADL,CACU,GADV,EACe,UAAU4B,CAAV,EAAa;AACpB,aAAOA,CAAC,CAACc,CAAT;AACH,KAHL,EAIKH,KAJL,CAIW,MAJX,EAImB,UAAUX,CAAV,EAAae,CAAb,EAAgB;AAC3B,aAAOF,MAAM,CAACE,CAAD,CAAb;AACH,KANL;AAQAd,IAAAA,IAAI,CAACK,MAAL,CAAY,MAAZ,EACKlC,IADL,CACU,IADV,EACgB,MADhB,EAEKuC,KAFL,CAEW,aAFX,EAE0B,QAF1B,EAGKC,IAHL,CAGU,UAAUZ,CAAV,EAAa;AACf,aAAOA,CAAC,CAACrB,IAAF,CAAOU,IAAP,CAAY2B,SAAZ,CAAsB,CAAtB,EAAyBhB,CAAC,CAACc,CAAF,GAAM,CAA/B,CAAP;AACH,KALL,EAMK1C,IANL,CAMU,aANV,EAMyB,YANzB,EAOKA,IAPL,CAOU,WAPV,EAOuB,UAAU4B,CAAV,EAAa;AAC5B,aAAOA,CAAC,CAACc,CAAF,GAAM,CAAb;AACH,KATL,EAUK1C,IAVL,CAUU,MAVV,EAUkB,OAVlB;AAYA6B,IAAAA,IAAI,CAACK,MAAL,CAAY,MAAZ,EACKlC,IADL,CACU,IADV,EACgB,OADhB,EAEKuC,KAFL,CAEW,aAFX,EAE0B,QAF1B,EAGKC,IAHL,CAGU,UAAUZ,CAAV,EAAa;AACf,aAAOA,CAAC,CAACrB,IAAF,CAAOW,KAAd;AACH,KALL,EAMKlB,IANL,CAMU,aANV,EAMyB,WANzB,EAMsC,cANtC,EAOKA,IAPL,CAOU,WAPV,EAOuB,UAAU4B,CAAV,EAAa;AAC5B,aAAOA,CAAC,CAACc,CAAF,GAAM,CAAb;AACH,KATL,EAUK1C,IAVL,CAUU,MAVV,EAUkB,OAVlB;AAYA6B,IAAAA,IAAI,CACCgB,EADL,CACQ,WADR,EACqB,UAAUjB,CAAV,EAAa;AAC1BU,MAAAA,OAAO,CAACE,IAAR,CAAaZ,CAAC,CAACkB,IAAF,CAAO,CAAP,EAAUC,QAAV,CAAmBxC,IAAnB,CAAwBU,IAAxB,GAA+B,IAA/B,GAAsCW,CAAC,CAACkB,IAAF,CAAO,CAAP,EAAUC,QAAV,CAAmBxC,IAAnB,CAAwBW,KAA3E;AACAoB,MAAAA,OAAO,CAACC,KAAR,CAAc,YAAd,EAA4B,SAA5B;AACH,KAJL,EAKKM,EALL,CAKQ,WALR,EAKqB,UAAUG,KAAV,EAAiBpB,CAAjB,EAAoB;AACjC,aAAOU,OAAO,CAACC,KAAR,CAAc,KAAd,EAAsBS,KAAK,CAACC,KAAN,GAAc,EAAf,GAAqB,IAA1C,EAAgDV,KAAhD,CAAsD,MAAtD,EAA+DS,KAAK,CAACE,KAAN,GAAc,EAAf,GAAqB,IAAnF,CAAP;AACH,KAPL,EAQKL,EARL,CAQQ,UARR,EAQoB,YAAY;AAAE,aAAOP,OAAO,CAACC,KAAR,CAAc,YAAd,EAA4B,QAA5B,CAAP;AAA+C,KARjF,EAnHa,CA4Hb;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIY,IAAI,GAAG3E,EAAE,CAAC2E,IAAH,GACNC,WADM,CACM,CAAC,CAAD,EAAI,CAAJ,CADN,EAENP,EAFM,CAEH,MAFG,EAEK,UAAUG,KAAV,EAAiB;AACrB7D,MAAAA,GAAG,CAACa,IAAJ,CAAS,WAAT,EAAsBgD,KAAK,CAACK,SAA5B;AAEP,KALM,CAAX;AAOAlE,IAAAA,GAAG,CAACmE,IAAJ,CAASH,IAAT;;AAEA,aAASI,SAAT,GAAqB;AACjB/E,MAAAA,EAAE,CAACuB,MAAH,CAAU,IAAV,EAAgBC,IAAhB,CAAqB,SAArB,EAAgC,EAAhC;AACH;;AAED,aAASwD,QAAT,GAAoB;AAChBhF,MAAAA,EAAE,CAACuB,MAAH,CAAU,IAAV,EAAgBC,IAAhB,CAAqB,SAArB,EAAgC,CAAhC;AACH;;AAED,aAASyD,MAAT,CAAgB;AAAEJ,MAAAA;AAAF,KAAhB,EAA+B;AAC3B5B,MAAAA,KAAK,CAACzB,IAAN,CAAW,WAAX,EAAwBqD,SAAxB;AACH;;AAED,QAAIK,MAAM,GAAGhF,GAAG,CAACiF,WAAJ,GACRC,KADQ,CACFxC,KADE,EAERyC,KAFQ,CAEF,QAFE,EAGRC,MAHQ,CAGD,UAHC,EAIRC,WAJQ,CAII,CAJJ,CAAb;AAMA5E,IAAAA,GAAG,CAAC+C,MAAJ,CAAW,GAAX,EACKlC,IADL,CACU,OADV,EACmB,QADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,gBAAgBZ,KAAK,GAAC,GAAtB,IAA6B,IAA7B,GAAoC,EAApC,GAAuC,GAF9D;AAIAD,IAAAA,GAAG,CAACY,MAAJ,CAAW,SAAX,EACKuD,IADL,CACUI,MADV;AAEH;;AAEDM,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ;AAGH;;AA7NqC;;AAgO1C,eAAerF,WAAf","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\nimport * as d3l from 'd3-svg-legend'\n\n\nclass BubbleChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBubbles = this.removeExistingBubbles.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            width: null,\n            height: null,\n        };\n    }\n\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#bc\").select(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"class\", \"bubble\");\n\n        this.setState({ svg });\n        this.setState({ width });\n        this.setState({ height });\n    }\n\n    componentDidUpdate() {\n        this.removeExistingBubbles();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBubbles() {\n        const { svg } = this.state;\n        svg.selectAll(\"*\").remove();\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n\n        const rawdata = this.props.data\n\n        console.log(rawdata)\n\n        let dataset = {\n            \"children\": []\n        };\n\n        console.log(dataset)\n        console.log(typeof (dataset))\n\n        for (var val of rawdata) {\n            let key = Object.values(val)[0]\n            let theval = Object.values(Object.values(val)[1][0])[0]\n\n            dataset[\"children\"].push({\n                Name: key,\n                Count: theval\n            })\n        }\n        console.log(dataset)\n\n        var diameter = 300;\n        var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                      \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                      \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n\n        var bubble = d3.pack(dataset)\n            .size([diameter, diameter])\n            .padding(1.5);\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var diameter = 600;\n        var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                      \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                      \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n\n        var bubble = d3.pack(dataset)\n            .size([width, height])\n            .padding(1.5);\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var node = svg.selectAll(\".node\")\n            .data(bubble(nodes).descendants())\n            .enter()\n            .filter(function (d) {\n                return !d.children\n            })\n            .append(\"g\")\n            .attr(\"class\", function (d) {\n                {console.log(d.data.Name)}return d.data.name;\n            })\n            .attr(\"transform\", function (d) {\n                return \"translate(\" + d.x + \",\" + d.y + \")\";\n            })\n\n        var tooltip = d3.select(\"body\").select(\"#bc\")\n            .append(\"div\")\n            .style(\"position\", \"absolute\")\n            .style(\"z-index\", \"10\")\n            .style(\"visibility\", \"hidden\")\n            .style(\"color\", \"white\")\n            .style(\"padding\", \"8px\")\n            .style(\"background-color\", \"rgba(0, 0, 0, 0.75)\")\n            .style(\"border-radius\", \"6px\")\n            .style(\"font\", \"12px sans-serif\")\n            .text(\"tooltip\");\n\n        var colors = [\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                       \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                       \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"];\n        node.append(\"circle\")\n            .attr(\"r\", function (d) {\n                return d.r;\n            })\n            .style(\"fill\", function (d, i) {\n                return colors[i];\n            })\n\n        node.append(\"text\")\n            .attr(\"dy\", \".2em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Name.substring(0, d.r / 3);\n            })\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        node.append(\"text\")\n            .attr(\"dy\", \"1.3em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Count;\n            })\n            .attr(\"font-family\", \"Gill Sans\", \"Gill Sans MT\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        node\n            .on(\"mouseover\", function (d) {\n                tooltip.text(d.path[0].__data__.data.Name + \": \" + d.path[0].__data__.data.Count);\n                tooltip.style(\"visibility\", \"visible\");\n            })\n            .on(\"mousemove\", function (event, d) {\n                return tooltip.style(\"top\", (event.pageY - 10) + \"px\").style(\"left\", (event.pageX + 10) + \"px\");\n            })\n            .on(\"mouseout\", function () { return tooltip.style(\"visibility\", \"hidden\"); });\n        // svg.selectAll(\"circle\").on(\"click\", clicked);\n\n        // function clicked(event, d) {\n        //     if (event.defaultPrevented) return; // dragged\n\n        //     d3.select(this).transition()\n        //         .attr(console.log(this))\n        //         .attr(\"fill\", \"black\")\n        //         .attr(\"r\", d.r * 2)\n        //         .transition()\n        //         .attr(\"r\", d.r)\n        //         .attr(\"fill\", d3.schemeCategory10[d.index % 10]);\n        // }\n\n        var zoom = d3.zoom()\n            .scaleExtent([1, 8])\n            .on('zoom', function (event) {\n                    svg.attr('transform', event.transform)\n\n            });\n\n        svg.call(zoom);\n\n        function mouseover() {\n            d3.select(this).attr(\"opacity\", .5)\n        }\n\n        function mouseout() {\n            d3.select(this).attr(\"opacity\", 1);\n        }\n\n        function zoomed({ transform }) {\n            nodes.attr(\"transform\", transform);\n        }\n\n        var legend = d3l.legendColor()\n            .scale(color)\n            .shape('circle')\n            .orient('vertical')\n            .labelOffset(5)\n\n        svg.append(\"g\")\n            .attr(\"class\", \"legend\")\n            .attr(\"transform\", \"translate(\" + (width-100) + \", \" + 20+\")\");\n\n        svg.select(\".legend\")\n            .call(legend);\n    }\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n}\n\nexport default BubbleChart;\n"]},"metadata":{},"sourceType":"module"}