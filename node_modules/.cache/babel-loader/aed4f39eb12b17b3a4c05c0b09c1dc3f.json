{"ast":null,"code":"import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import*as d3l from'd3-svg-legend';import'./StackedBarChart.css';var StackedBarChart=/*#__PURE__*/function(_React$Component){_inherits(StackedBarChart,_React$Component);var _super=_createSuper(StackedBarChart);function StackedBarChart(props){var _this;_classCallCheck(this,StackedBarChart);_this=_super.call(this,props);_this.removeExistingBars=_this.removeExistingBars.bind(_assertThisInitialized(_this));_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));_this.state={svg:null,div:null};return _this;}_createClass(StackedBarChart,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:0,bottom:20,left:70},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#sb\").select(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");var div=d3.select(\"body\").append(\"div\").attr(\"class\",\"tooltip-donut\").style(\"opacity\",0);this.setState({svg:svg,div:div,width:width,height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeExistingBars();this.createBarChart();}},{key:\"midpoint\",value:function midpoint(range){return range[0]+(range[1]-range[0])/2.0;}},{key:\"removeExistingBars\",value:function removeExistingBars(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createBarChart\",value:function createBarChart(){var svg=this.state.svg;var div=this.state.div;var owidth=this.props.size[0];var oheight=this.props.size[1];var selector=this.props.selector;var margin={top:20,right:0,bottom:20,left:70},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var output=this.props.data;var yScale=d3.scaleBand().range([margin.top,height-margin.bottom]).padding(0.1).paddingOuter(0.2).rangeRound([0,height]).align(0.1);var xScale=d3.scaleLinear().rangeRound([0,width]);var zScale=d3.scaleOrdinal(d3.schemeCategory10);var keys=[\"Government\",\"Medicaid\",\"Medicare\",\"Private\",\"Self Pay\"];xScale.domain([0,1500]);yScale.domain(output.map(function(d){return d.disease;}));zScale.domain(keys);console.log(\"keys\");console.log(keys);console.log(\"output\");console.log(output);console.log(\"d3\");console.log(d3.stack().keys(keys)(output));svg.attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");svg.append(\"g\").attr(\"class\",\"axis\").style(\"stroke\",\"lightslategray\").call(d3.axisLeft(yScale).ticks(null,\"s\"));svg.append(\"g\").attr(\"class\",\"axis\").attr(\"transform\",\"translate(0,\"+height+\")\").style(\"stroke\",\"lightslategray\").call(d3.axisBottom(xScale).ticks(16,\"f\"));svg.append(\"g\").selectAll(\"g\").data(d3.stack().keys(keys)(output)).enter().append(\"g\").attr(\"fill\",function(d){return zScale(d.key);}).selectAll(\"rect\").data(function(d){{console.log(\"stacked\",d);}return d;}).enter().append(\"rect\").attr(\"y\",function(d){{console.log(\"y\",d);}return yScale(d.data.disease);}).attr(\"x\",function(d){{console.log(\"x\",d);}return xScale(d[0]);}).attr(\"height\",function(d){return yScale.bandwidth();}).on(\"mouseover\",function(event,d){d3.select(this).transition().duration('50').attr('opacity',.50);console.log(d,event);/// add to html\ndiv.transition().duration(50).style(\"opacity\",1);var key=Object.keys(d.data).find(function(key){return d.data[key]===d[1]-d[0];});div.html(\" Alarm Type: \"+key+\"<br>\"+\"Total Number of Alarms: \"+(d[1]-d[0])).style(\"left\",event.pageX-30+\"px\").style(\"top\",event.pageY-15+\"px\");}).on(\"mouseout\",function(d){d3.select(this).transition().duration('50').attr('opacity',1);div.transition().duration('50').style(\"opacity\",0);}).transition().duration(2000)//time in ms\n.attr(\"width\",function(d){return xScale(d[1])-xScale(d[0]);});var legend=d3l.legendColor().scale(zScale).shape('circle').orient('vertical');svg.append(\"g\").attr(\"class\",\"legend\").attr(\"transform\",\"translate(\"+(width-350)+\", \"+20+\")\");svg.select(\".legend\").call(legend);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return StackedBarChart;}(React.Component);export default StackedBarChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/StackedBarChart.js"],"names":["React","d3","d3l","StackedBarChart","props","removeExistingBars","bind","createBarChart","state","svg","div","owidth","size","oheight","margin","top","right","bottom","left","width","height","select","attr","append","style","setState","range","selectAll","remove","selector","output","data","yScale","scaleBand","padding","paddingOuter","rangeRound","align","xScale","scaleLinear","zScale","scaleOrdinal","schemeCategory10","keys","domain","map","d","disease","console","log","stack","call","axisLeft","ticks","axisBottom","enter","key","bandwidth","on","event","transition","duration","Object","find","html","pageX","pageY","legend","legendColor","scale","shape","orient","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport * as d3l from 'd3-svg-legend'\nimport './StackedBarChart.css'\n\nclass StackedBarChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBars = this.removeExistingBars.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            div: null\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 0, bottom: 20, left: 70 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#sb\").select(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n        const div = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"tooltip-donut\")\n            .style(\"opacity\", 0);\n\n        this.setState({ svg, div, width, height });\n    }\n    componentDidUpdate() {\n        this.removeExistingBars();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBars() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { div } = this.state;\n\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        const selector = this.props.selector\n\n        var margin = { top: 20, right: 0, bottom: 20, left: 70 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        let output = this.props.data\n\n  \n        var yScale = d3.scaleBand()\n            .range([margin.top, height - margin.bottom])\n            .padding(0.1)\n            .paddingOuter(0.2)\n            .rangeRound([0, height])\n            .align(0.1);\n\n        var xScale = d3.scaleLinear()\n            .rangeRound([0, width]);\n\n        var zScale = d3.scaleOrdinal(d3.schemeCategory10)\n\n\n\n        var keys = [\"Government\", \"Medicaid\", \"Medicare\", \"Private\", \"Self Pay\"]\n        xScale.domain([0, 1500])\n\n\n        yScale.domain(output.map(function (d) { return d.disease; }));\n\n        zScale.domain(keys)\n\n        console.log(\"keys\")\n        console.log(keys)\n\n\n        console.log(\"output\")\n        console.log(output)\n\n        console.log(\"d3\")\n        console.log(d3.stack().keys(keys)(output))\n\n        svg.attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        svg.append(\"g\")\n            .attr(\"class\", \"axis\")\n            .style(\"stroke\", \"lightslategray\")\n            .call(d3.axisLeft(yScale).ticks(null, \"s\"));\n        svg.append(\"g\")\n            .attr(\"class\", \"axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .style(\"stroke\", \"lightslategray\")\n            .call(d3.axisBottom(xScale).ticks(16, \"f\"));\n\n        svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(d3.stack().keys(keys)(output))\n            .enter().append(\"g\")\n            .attr(\"fill\", function (d) { return zScale(d.key) })\n            .selectAll(\"rect\").data(function (d) { { console.log(\"stacked\", d) } return d; })\n            .enter().append(\"rect\")\n            .attr(\"y\", function (d) { { console.log(\"y\", d) } return yScale(d.data.disease) })\n            .attr(\"x\", function (d) { { console.log(\"x\", d) } return xScale(d[0]) })\n            .attr(\"height\", function (d) {\n                return yScale.bandwidth()\n            })\n            .on(\"mouseover\", function (event, d) {\n                d3.select(this).transition()\n                    .duration('50')\n                    .attr('opacity', .50);\n                console.log(d, event)\n                /// add to html\n                div.transition()\n                    .duration(50)\n                    .style(\"opacity\", 1)\n                let key = Object.keys(d.data).find(key => d.data[key] === d[1] - d[0]);\n\n                div.html(\" Alarm Type: \" + key + \"<br>\" + \"Total Number of Alarms: \" + (d[1] - d[0]))\n                    .style(\"left\", (event.pageX - 30) + \"px\")\n                    .style(\"top\", (event.pageY - 15) + \"px\")\n\n            })\n            .on(\"mouseout\", function (d) {\n                d3.select(this).transition()\n                    .duration('50')\n                    .attr('opacity', 1)\n                div.transition()\n                    .duration('50')\n                    .style(\"opacity\", 0)\n            })\n            .transition()\n            .duration(2000)//time in ms\n            .attr(\"width\", function (d) {\n                return xScale(d[1]) - xScale(d[0])\n            })\n\n        var legend = d3l.legendColor()\n            .scale(zScale)\n            .shape('circle')\n            .orient('vertical')\n\n\n        svg.append(\"g\")\n            .attr(\"class\", \"legend\")\n            .attr(\"transform\", \"translate(\" + (width - 350) + \", \" + 20 + \")\");\n\n\n        svg.select(\".legend\")\n            .call(legend);\n\n\n    }\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n}\n\nexport default StackedBarChart;\n"]},"metadata":{},"sourceType":"module"}