{"ast":null,"code":"import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import{range}from'd3';var TreeMap=/*#__PURE__*/function(_React$Component){_inherits(TreeMap,_React$Component);var _super=_createSuper(TreeMap);function TreeMap(props){var _this;_classCallCheck(this,TreeMap);_this=_super.call(this,props);_this.removeMap=_this.removeMap.bind(_assertThisInitialized(_this));_this.createMap=_this.createMap.bind(_assertThisInitialized(_this));_this.state={svg:null,width:null,height:null};return _this;}_createClass(TreeMap,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#tm\").select(\"svg\").attr(\"width\",width).attr(\"height\",height);this.setState({svg:svg});this.setState({width:width});this.setState({height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeMap();this.createMap();}},{key:\"removeMap\",value:function removeMap(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createMap\",value:function createMap(){var svg=this.state.svg;var width=this.state.width;var height=this.state.height;var rawdata=this.props.data;var dataset={name:\"q8\",\"children\":[]};rawdata.forEach(function(d){dataset[\"children\"].push({name:d.diagnosis,children:d.values});});var data=dataset;console.log(data);var hierarchy=d3.hierarchy(data).sum(function(d){return d.value;})//sum every child's values\n.sort(function(a,b){return b.value-a.value;});// and sort them in descending order \nvar treemap=d3.treemap().size([width,height])// width: 400px, height:450px\n.padding(1);// set padding to 1\nvar categories=dataset.children.map(function(d){return d.name;});var root=treemap(hierarchy);var colors=['#1C1832','#9E999D','#F2259C','#347EB4','#08ACB6','#91BB91','#BCD32F','#75EDB8',\"#89EE4B\",'#AD4FE8','#D5AB61','#BC3B3A','#F6A1F9','#87ABBB','#412433','#56B870','#FDAB41','#64624F'];var colorScale=d3.scaleOrdinal()// the scale function\n.domain(categories)// the data\n.range(colors);// the way the data should be shown\nsvg.selectAll(\"rect\").data(root.leaves()).enter().append(\"rect\").attr(\"x\",function(d){return d.x0;}).attr(\"y\",function(d){return d.y0;}).attr(\"width\",function(d){return d.x1-d.x0;}).attr(\"height\",function(d){return d.y1-d.y0;}).attr(\"fill\",function(d){return colorScale(d.data.value);}).attr(\"font-size\",\"15px\");svg.selectAll('text').data(root.leaves()).enter().append('text').selectAll('tspan').data(function(d){{console.log(d.parent.data.name);}return d.parent.data.name.split(/(?=[A-Z][^A-Z])/g).// split the name of movie\nmap(function(v){{console.log(v);}return{text:v,x0:d.x0,// keep x0 reference\ny0:d.y0// keep y0 reference\n};});}).enter().append('tspan').attr(\"x\",function(d){return d.x0+5;}).attr(\"y\",function(d,i){return d.y0+15+i*2;})// offset by index \n.text(function(d){return d.text;}).attr(\"font-size\",\"0.5em\").attr(\"fill\",\"white\");}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return TreeMap;}(React.Component);export default TreeMap;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/TreeMap.js"],"names":["React","d3","range","TreeMap","props","removeMap","bind","createMap","state","svg","width","height","owidth","size","oheight","margin","top","right","bottom","left","select","attr","setState","selectAll","remove","rawdata","data","dataset","name","forEach","d","push","diagnosis","children","values","console","log","hierarchy","sum","value","sort","a","b","treemap","padding","categories","map","root","colors","colorScale","scaleOrdinal","domain","leaves","enter","append","x0","y0","x1","y1","parent","split","v","text","i","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\n\nclass TreeMap extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeMap = this.removeMap.bind(this);\n        this.createMap = this.createMap.bind(this)\n        this.state = {\n            svg: null,\n            width: null,\n            height: null,\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#tm\").select(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n\n        this.setState({ svg });\n        this.setState({ width });\n        this.setState({ height });\n\n    }\n    componentDidUpdate() {\n        this.removeMap();\n        this.createMap();\n    }\n\n\n    removeMap() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createMap() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n\n        const rawdata = this.props.data\n        let dataset = {\n            name: \"q8\",\n            \"children\": []\n        };\n\n        rawdata.forEach(function (d) {\n            dataset[\"children\"].push({\n                name: d.diagnosis,\n                children: d.values\n            })\n        })\n        let data = dataset\n        console.log(data)\n        const hierarchy = d3.hierarchy(data)\n            .sum(d => d.value)  //sum every child's values\n            .sort((a, b) => b.value - a.value) // and sort them in descending order \n        const treemap = d3.treemap()\n            .size([width, height]) // width: 400px, height:450px\n            .padding(1);      // set padding to 1\n\n        const categories = dataset.children.map(d => d.name);\n\n        const root = treemap(hierarchy);\n        const colors = ['#1C1832', '#9E999D', '#F2259C', '#347EB4',\n            '#08ACB6', '#91BB91', '#BCD32F', '#75EDB8',\n            \"#89EE4B\", '#AD4FE8', '#D5AB61', '#BC3B3A',\n            '#F6A1F9', '#87ABBB', '#412433', '#56B870',\n            '#FDAB41', '#64624F']\n\n        const colorScale = d3.scaleOrdinal() // the scale function\n            .domain(categories) // the data\n            .range(colors)    // the way the data should be shown\n\n        svg.selectAll(\"rect\")\n            .data(root.leaves())\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", d => d.x0)\n            .attr(\"y\", d => d.y0)\n            .attr(\"width\", d => d.x1 - d.x0)\n            .attr(\"height\", d => d.y1 - d.y0)\n            .attr(\"fill\", d => colorScale(d.data.value))\n            .attr(\"font-size\", \"15px\")\n\n\n        svg.selectAll('text')\n            .data(root.leaves())\n            .enter()\n            .append('text')\n            .selectAll('tspan')\n            .data(d => {\n                { console.log(d.parent.data.name)}\n                return (d.parent.data.name.split(/(?=[A-Z][^A-Z])/g))// split the name of movie\n                    .map(v => {\n                        { console.log(v) }\n                        return {\n                            text: v,\n                            x0: d.x0,                        // keep x0 reference\n                            y0: d.y0                         // keep y0 reference\n                        }\n                    });\n            })\n            .enter()\n            .append('tspan')\n            .attr(\"x\", (d) => d.x0 + 5)\n            .attr(\"y\", (d, i) => d.y0 + 15 + (i * 2))       // offset by index \n            .text((d) => d.text)\n            .attr(\"font-size\", \"0.5em\")\n            .attr(\"fill\", \"white\");\n\n    }\n\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n\n}\n\nexport default TreeMap;\n"]},"metadata":{},"sourceType":"module"}