{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import{range}from'd3';import*as d3l from'd3-svg-legend';var BubbleChart=/*#__PURE__*/function(_React$Component){_inherits(BubbleChart,_React$Component);var _super=_createSuper(BubbleChart);function BubbleChart(props){var _this;_classCallCheck(this,BubbleChart);_this=_super.call(this,props);_this.removeExistingBubbles=_this.removeExistingBubbles.bind(_assertThisInitialized(_this));_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));_this.state={svg:null,width:null,height:null};return _this;}_createClass(BubbleChart,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:20},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#bc\").select(\"svg\").attr(\"width\",width).attr(\"height\",height).attr(\"class\",\"bubble\");this.setState({svg:svg});this.setState({width:width});this.setState({height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeExistingBubbles();this.createBarChart();}},{key:\"midpoint\",value:function midpoint(range){return range[0]+(range[1]-range[0])/2.0;}},{key:\"removeExistingBubbles\",value:function removeExistingBubbles(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createBarChart\",value:function createBarChart(){var svg=this.state.svg;var width=this.state.width;var height=this.state.height;var rawdata=this.props.data;console.log(rawdata);var dataset={\"children\":[]};console.log(dataset);console.log(typeof dataset);var _iterator=_createForOfIteratorHelper(rawdata),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;var key=Object.values(val)[0];var theval=Object.values(Object.values(val)[1][0])[0];dataset[\"children\"].push({Name:key,Count:theval});}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(dataset);var diameter=300;var color=d3.scaleOrdinal().range([\"#60a3bc\",\"#e55039\",\"#4a69bd\",\"#f6b93b\",\"#78e08f\",\"#0a3d62\",\"#b71540\",\"#0c2461\",\"#e58e26\",\"#079992\",\"#3c6382\",\"#eb2f06\",\"#1e3799\",\"#fa983a\",\"#38ada9\",\"#82ccdd\",\"#f8c291\",\"#6a89cc\",\"#fad390\",\"#b8e994\"]);var bubble=d3.pack(dataset).size([diameter,diameter]).padding(1.5);var nodes=d3.hierarchy(dataset).sum(function(d){return d.Count;});var diameter=600;var color=d3.scaleOrdinal().range([\"#60a3bc\",\"#e55039\",\"#4a69bd\",\"#f6b93b\",\"#78e08f\",\"#0a3d62\",\"#b71540\",\"#0c2461\",\"#e58e26\",\"#079992\",\"#3c6382\",\"#eb2f06\",\"#1e3799\",\"#fa983a\",\"#38ada9\",\"#82ccdd\",\"#f8c291\",\"#6a89cc\",\"#fad390\",\"#b8e994\"]);var bubble=d3.pack(dataset).size([width,height]).padding(1.5);var nodes=d3.hierarchy(dataset).sum(function(d){return d.Count;});var node=svg.selectAll(\".node\").data(bubble(nodes).descendants()).enter().filter(function(d){return!d.children;}).append(\"g\").attr(\"class\",function(d){{console.log(d.data.Name);}return d.data.name;}).attr(\"transform\",function(d){return\"translate(\"+d.x+\",\"+d.y+\")\";});var tooltip=d3.select(\"body\").select(\"#bc\").append(\"div\").style(\"position\",\"absolute\").style(\"z-index\",\"10\").style(\"visibility\",\"hidden\").style(\"color\",\"white\").style(\"padding\",\"8px\").style(\"background-color\",\"rgba(0, 0, 0, 0.75)\").style(\"border-radius\",\"6px\").style(\"font\",\"12px sans-serif\").text(\"tooltip\");var colors=[\"#60a3bc\",\"#e55039\",\"#4a69bd\",\"#f6b93b\",\"#78e08f\",\"#0a3d62\",\"#b71540\",\"#0c2461\",\"#e58e26\",\"#079992\",\"#3c6382\",\"#eb2f06\",\"#1e3799\",\"#fa983a\",\"#38ada9\",\"#82ccdd\",\"#f8c291\",\"#6a89cc\",\"#fad390\",\"#b8e994\"];node.append(\"circle\").attr(\"r\",function(d){return d.r;}).style(\"fill\",function(d,i){return colors[i];});node.append(\"text\").attr(\"dy\",\".2em\").style(\"text-anchor\",\"middle\").text(function(d){return d.data.Name.substring(0,d.r/3);}).attr(\"font-family\",\"sans-serif\").attr(\"font-size\",function(d){return d.r/5;}).attr(\"fill\",\"white\");node.append(\"text\").attr(\"dy\",\"1.3em\").style(\"text-anchor\",\"middle\").text(function(d){return d.data.Count;}).attr(\"font-family\",\"Gill Sans\",\"Gill Sans MT\").attr(\"font-size\",function(d){return d.r/5;}).attr(\"fill\",\"white\");node.on(\"mouseover\",function(d){tooltip.text(d.path[0].__data__.data.Name+\": \"+d.path[0].__data__.data.Count);tooltip.style(\"visibility\",\"visible\");}).on(\"mousemove\",function(event,d){return tooltip.style(\"top\",event.pageY-10+\"px\").style(\"left\",event.pageX+10+\"px\");}).on(\"mouseout\",function(){return tooltip.style(\"visibility\",\"hidden\");});// svg.selectAll(\"circle\").on(\"click\", clicked);\n// function clicked(event, d) {\n//     if (event.defaultPrevented) return; // dragged\n//     d3.select(this).transition()\n//         .attr(console.log(this))\n//         .attr(\"fill\", \"black\")\n//         .attr(\"r\", d.r * 2)\n//         .transition()\n//         .attr(\"r\", d.r)\n//         .attr(\"fill\", d3.schemeCategory10[d.index % 10]);\n// }\nvar zoom=d3.zoom().scaleExtent([1,8]).on('zoom',function(event){svg.attr('transform',event.transform);});svg.call(zoom);function mouseover(){d3.select(this).attr(\"opacity\",.5);}function mouseout(){d3.select(this).attr(\"opacity\",1);}function zoomed(_ref){var transform=_ref.transform;nodes.attr(\"transform\",transform);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return BubbleChart;}(React.Component);export default BubbleChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Wesbite/dashboard/src/views/dashboard/DashboardView/d3/BubbleChart.js"],"names":["React","d3","range","d3l","BubbleChart","props","removeExistingBubbles","bind","createBarChart","state","svg","width","height","owidth","size","oheight","margin","top","right","bottom","left","select","attr","setState","selectAll","remove","rawdata","data","console","log","dataset","val","key","Object","values","theval","push","Name","Count","diameter","color","scaleOrdinal","bubble","pack","padding","nodes","hierarchy","sum","d","node","descendants","enter","filter","children","append","name","x","y","tooltip","style","text","colors","r","i","substring","on","path","__data__","event","pageY","pageX","zoom","scaleExtent","transform","call","mouseover","mouseout","zoomed","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\nimport * as d3l from 'd3-svg-legend'\n\nclass BubbleChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBubbles = this.removeExistingBubbles.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            width: null,\n            height: null,\n        };\n    }\n\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 20 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#bc\").select(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"class\", \"bubble\");\n\n        this.setState({ svg });\n        this.setState({ width });\n        this.setState({ height });\n    }\n\n    componentDidUpdate() {\n        this.removeExistingBubbles();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBubbles() {\n        const { svg } = this.state;\n        svg.selectAll(\"*\").remove();\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n\n        const rawdata = this.props.data\n\n        console.log(rawdata)\n\n        let dataset = {\n            \"children\": []\n        };\n\n        console.log(dataset)\n        console.log(typeof (dataset))\n\n        for (var val of rawdata) {\n            let key = Object.values(val)[0]\n            let theval = Object.values(Object.values(val)[1][0])[0]\n\n            dataset[\"children\"].push({\n                Name: key,\n                Count: theval\n            })\n        }\n        console.log(dataset)\n\n        var diameter = 300;\n        var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                      \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                      \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n\n        var bubble = d3.pack(dataset)\n            .size([diameter, diameter])\n            .padding(1.5);\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var diameter = 600;\n        var color = d3.scaleOrdinal().range([\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                      \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                      \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"]);\n\n        var bubble = d3.pack(dataset)\n            .size([width, height])\n            .padding(1.5);\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var node = svg.selectAll(\".node\")\n            .data(bubble(nodes).descendants())\n            .enter()\n            .filter(function (d) {\n                return !d.children\n            })\n            .append(\"g\")\n            .attr(\"class\", function (d) {\n                {console.log(d.data.Name)}return d.data.name;\n            })\n            .attr(\"transform\", function (d) {\n                return \"translate(\" + d.x + \",\" + d.y + \")\";\n            })\n\n        var tooltip = d3.select(\"body\").select(\"#bc\")\n            .append(\"div\")\n            .style(\"position\", \"absolute\")\n            .style(\"z-index\", \"10\")\n            .style(\"visibility\", \"hidden\")\n            .style(\"color\", \"white\")\n            .style(\"padding\", \"8px\")\n            .style(\"background-color\", \"rgba(0, 0, 0, 0.75)\")\n            .style(\"border-radius\", \"6px\")\n            .style(\"font\", \"12px sans-serif\")\n            .text(\"tooltip\");\n\n        var colors = [\"#60a3bc\", \"#e55039\", \"#4a69bd\", \"#f6b93b\", \"#78e08f\",\n                      \"#0a3d62\", \"#b71540\", \"#0c2461\", \"#e58e26\", \"#079992\",\n                       \"#3c6382\", \"#eb2f06\", \"#1e3799\", \"#fa983a\", \"#38ada9\",\n                       \"#82ccdd\", \"#f8c291\", \"#6a89cc\", \"#fad390\", \"#b8e994\"];\n        node.append(\"circle\")\n            .attr(\"r\", function (d) {\n                return d.r;\n            })\n            .style(\"fill\", function (d, i) {\n                return colors[i];\n            })\n\n        node.append(\"text\")\n            .attr(\"dy\", \".2em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Name.substring(0, d.r / 3);\n            })\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        node.append(\"text\")\n            .attr(\"dy\", \"1.3em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Count;\n            })\n            .attr(\"font-family\", \"Gill Sans\", \"Gill Sans MT\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        node\n            .on(\"mouseover\", function (d) {\n                tooltip.text(d.path[0].__data__.data.Name + \": \" + d.path[0].__data__.data.Count);\n                tooltip.style(\"visibility\", \"visible\");\n            })\n            .on(\"mousemove\", function (event, d) {\n                return tooltip.style(\"top\", (event.pageY - 10) + \"px\").style(\"left\", (event.pageX + 10) + \"px\");\n            })\n            .on(\"mouseout\", function () { return tooltip.style(\"visibility\", \"hidden\"); });\n        // svg.selectAll(\"circle\").on(\"click\", clicked);\n\n        // function clicked(event, d) {\n        //     if (event.defaultPrevented) return; // dragged\n\n        //     d3.select(this).transition()\n        //         .attr(console.log(this))\n        //         .attr(\"fill\", \"black\")\n        //         .attr(\"r\", d.r * 2)\n        //         .transition()\n        //         .attr(\"r\", d.r)\n        //         .attr(\"fill\", d3.schemeCategory10[d.index % 10]);\n        // }\n\n        var zoom = d3.zoom()\n            .scaleExtent([1, 8])\n            .on('zoom', function (event) {\n                    svg.attr('transform', event.transform)\n\n            });\n\n        svg.call(zoom);\n\n        function mouseover() {\n            d3.select(this).attr(\"opacity\", .5)\n        }\n\n        function mouseout() {\n            d3.select(this).attr(\"opacity\", 1);\n        }\n\n        function zoomed({ transform }) {\n            nodes.attr(\"transform\", transform);\n        }\n    }\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n}\n\nexport default BubbleChart;\n"]},"metadata":{},"sourceType":"module"}