{"ast":null,"code":"import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import*as d3l from'd3-svg-legend';import{event as currentEvent}from'd3-selection';var svg_count=0;var AreaChart=/*#__PURE__*/function(_React$Component){_inherits(AreaChart,_React$Component);var _super=_createSuper(AreaChart);function AreaChart(props){var _this;_classCallCheck(this,AreaChart);_this=_super.call(this,props);_this.removeExistingBars=_this.removeExistingBars.bind(_assertThisInitialized(_this));_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));_this.state={svg:null,legend:null,width:0,height:0};return _this;}_createClass(AreaChart,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#ac\").select(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");this.setState({svg:svg,width:width,height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeExistingBars();this.createBarChart();}},{key:\"midpoint\",value:function midpoint(range){return range[0]+(range[1]-range[0])/2.0;}},{key:\"removeExistingBars\",value:function removeExistingBars(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createBarChart\",value:function createBarChart(){var svg=this.state.svg;var width=this.state.width;var height=this.state.height;var output=this.props.data;var data=output.filter(function(e){return e.id<299;});var color=d3.scaleOrdinal(d3.schemeCategory10);var keys=this.props.keys;console.log(keys);var stackedData=d3.stack().keys(keys)(data);console.log(\"originalData\",data);console.log(\"pancake\",stackedData);// color palette\nvar color=d3.scaleOrdinal().domain(keys).range(d3.schemeSet2);//////////\n// AXIS //\n//////////\n// Add X axis\nvar x=d3.scaleLinear().domain(d3.extent(data,function(d){return d.id;})).range([0,width]);var xAxis=svg.append(\"g\").attr(\"transform\",\"translate(0,\"+height+\")\").call(d3.axisBottom(x).ticks(5));// Add X axis label:\nsvg.append(\"text\").attr(\"text-anchor\",\"end\").attr(\"x\",width).attr(\"y\",height+40).text(\"Age\");// Add Y axis label:\nsvg.append(\"text\").attr(\"text-anchor\",\"end\").attr(\"x\",0).attr(\"y\",-20).text(\"Distribution\").attr(\"text-anchor\",\"start\");// Add Y axis\nvar y=d3.scaleLinear().domain([0,500]).range([height,0]);svg.append(\"g\").call(d3.axisLeft(y).ticks(5));//////////\n// BRUSHING AND CHART //\n//////////\n// Add a clipPath: everything out of this area won't be drawn.\nvar clip=svg.append(\"defs\").append(\"svg:clipPath\").attr(\"id\",\"clip\").append(\"svg:rect\").attr(\"width\",width).attr(\"height\",height).attr(\"x\",0).attr(\"y\",0);// Add brushing\nvar brush=d3.brushX()// Add the brush feature using the d3.brush function\n.extent([[0,0],[width,height]])// initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n.on(\"end\",updateChart);// Each time the brush selection changes, trigger the 'updateChart' function\n// Create the scatter variable: where both the circles and the brush take place\nvar areaChart=svg.append('g').attr(\"clip-path\",\"url(#clip)\");// Area generator\nvar area=d3.area().x(function(d){return x(d.data.id);}).y0(function(d){return y(d[0]);}).y1(function(d){return y(d[1]);});// Show the areas\nareaChart.selectAll(\"mylayers\").data(stackedData).enter().append(\"path\").attr(\"class\",function(d){return\"myArea \"+d.key;}).style(\"fill\",function(d){return color(d.key);}).attr(\"d\",area);// Add the brushing\nareaChart.append(\"g\").attr(\"class\",\"brush\").call(brush);var idleTimeout;function idled(){idleTimeout=null;}// A function that update the chart for given boundaries\nfunction updateChart(event,d){var extent=event.selection;// If no selection, back to initial coordinate. Otherwise, update X axis domain\nif(!extent){if(!idleTimeout)return idleTimeout=setTimeout(idled,350);// This allows to wait a little bit\nx.domain(d3.extent(data,function(d){return d.id;}));}else{x.domain([x.invert(extent[0]),x.invert(extent[1])]);areaChart.select(\".brush\").call(brush.move,null);// This remove the grey brush area as soon as the selection has been done\n}// Update axis and area position\nxAxis.transition().duration(1000).call(d3.axisBottom(x).ticks(5));areaChart.selectAll(\"path\").transition().duration(1000).attr(\"d\",area);}//////////\n// HIGHLIGHT GROUP //\n//////////\n// What to do when one group is hovered\nvar highlight=function highlight(d){console.log(d);// reduce opacity of all groups\nd3.selectAll(\".myArea\").style(\"opacity\",.1);// expect the one that is hovered\nd3.select(\".\"+d).style(\"opacity\",1);};// And when it is not hovered anymore\nvar noHighlight=function noHighlight(d){d3.selectAll(\".myArea\").style(\"opacity\",1);};var legend=d3l.legendColor().scale(color).shape('circle').orient('vertical').labelOffset(5);svg.append(\"g\").attr(\"class\",\"legend\").attr(\"transform\",\"translate(\"+(width-80)+\", \"+20+\")\").style(\"font-size\",\"12\");svg.select(\".legend\").call(legend);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return AreaChart;}(React.Component);export default AreaChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/AreaChart.js"],"names":["React","d3","d3l","event","currentEvent","svg_count","AreaChart","props","removeExistingBars","bind","createBarChart","state","svg","legend","width","height","owidth","size","oheight","margin","top","right","bottom","left","select","attr","append","setState","range","selectAll","remove","output","data","filter","e","id","color","scaleOrdinal","schemeCategory10","keys","console","log","stackedData","stack","domain","schemeSet2","x","scaleLinear","extent","d","xAxis","call","axisBottom","ticks","text","y","axisLeft","clip","brush","brushX","on","updateChart","areaChart","area","y0","y1","enter","key","style","idleTimeout","idled","selection","setTimeout","invert","move","transition","duration","highlight","noHighlight","legendColor","scale","shape","orient","labelOffset","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport * as d3l from 'd3-svg-legend'\nimport { event as currentEvent } from 'd3-selection';\n\nlet svg_count = 0;\n\nclass AreaChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBars = this.removeExistingBars.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            legend:null,\n            width: 0,\n            height: 0\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#ac\").select(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        this.setState({ svg, width, height });\n    }\n    componentDidUpdate() {\n        this.removeExistingBars();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBars() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n\n        const output = this.props.data\n\n\n        let data = output.filter(function (e) {\n            return e.id < 299;\n        });\n\n        var color = d3.scaleOrdinal(d3.schemeCategory10)\n\n        var keys = this.props.keys\n        console.log(keys)\n        var stackedData = d3.stack()\n            .keys(keys)\n            (data)\n\n        console.log(\"originalData\", data)\n        console.log(\"pancake\", stackedData)\n\n\n\n        // color palette\n        var color = d3.scaleOrdinal()\n            .domain(keys)\n            .range(d3.schemeSet2);\n\n\n\n        //////////\n        // AXIS //\n        //////////\n\n        // Add X axis\n        var x = d3.scaleLinear()\n            .domain(d3.extent(data, function (d) { return d.id; }))\n            .range([0, width]);\n        var xAxis = svg.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(d3.axisBottom(x).ticks(5))\n\n        // Add X axis label:\n        svg.append(\"text\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"x\", width)\n            .attr(\"y\", height + 40)\n            .text(\"Age\");\n\n        // Add Y axis label:\n        svg.append(\"text\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"x\", 0)\n            .attr(\"y\", -20)\n            .text(\"Distribution\")\n            .attr(\"text-anchor\", \"start\")\n\n        // Add Y axis\n        var y = d3.scaleLinear()\n            .domain([0, 500])\n            .range([height, 0]);\n        svg.append(\"g\")\n            .call(d3.axisLeft(y).ticks(5))\n\n\n\n        //////////\n        // BRUSHING AND CHART //\n        //////////\n\n        // Add a clipPath: everything out of this area won't be drawn.\n        var clip = svg.append(\"defs\").append(\"svg:clipPath\")\n            .attr(\"id\", \"clip\")\n            .append(\"svg:rect\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .attr(\"x\", 0)\n            .attr(\"y\", 0);\n\n        // Add brushing\n        var brush = d3.brushX()                 // Add the brush feature using the d3.brush function\n            .extent([[0, 0], [width, height]]) // initialise the brush area: start at 0,0 and finishes at width,height: it means I select the whole graph area\n            .on(\"end\", updateChart) // Each time the brush selection changes, trigger the 'updateChart' function\n\n        // Create the scatter variable: where both the circles and the brush take place\n        var areaChart = svg.append('g')\n            .attr(\"clip-path\", \"url(#clip)\")\n\n        // Area generator\n        var area = d3.area()\n            .x(function (d) { return x(d.data.id); })\n            .y0(function (d) { return y(d[0]); })\n            .y1(function (d) { return y(d[1]); })\n\n        // Show the areas\n        areaChart\n            .selectAll(\"mylayers\")\n            .data(stackedData)\n            .enter()\n            .append(\"path\")\n            .attr(\"class\", function (d) { return \"myArea \" + d.key })\n            .style(\"fill\", function (d) { return color(d.key); })\n            .attr(\"d\", area)\n\n        // Add the brushing\n        areaChart\n            .append(\"g\")\n            .attr(\"class\", \"brush\")\n            .call(brush);\n\n        var idleTimeout\n        function idled() { idleTimeout = null; }\n\n        // A function that update the chart for given boundaries\n        function updateChart(event, d) {\n\n            let extent = event.selection\n\n            // If no selection, back to initial coordinate. Otherwise, update X axis domain\n            if (!extent) {\n                if (!idleTimeout) return idleTimeout = setTimeout(idled, 350); // This allows to wait a little bit\n                x.domain(d3.extent(data, function (d) { return d.id; }))\n            } else {\n                x.domain([x.invert(extent[0]), x.invert(extent[1])])\n                areaChart.select(\".brush\").call(brush.move, null) // This remove the grey brush area as soon as the selection has been done\n            }\n\n            // Update axis and area position\n            xAxis.transition().duration(1000).call(d3.axisBottom(x).ticks(5))\n            areaChart\n                .selectAll(\"path\")\n                .transition().duration(1000)\n                .attr(\"d\", area)\n        }\n\n\n\n        //////////\n        // HIGHLIGHT GROUP //\n        //////////\n\n        // What to do when one group is hovered\n        var highlight = function (d) {\n            console.log(d)\n            // reduce opacity of all groups\n            d3.selectAll(\".myArea\").style(\"opacity\", .1)\n            // expect the one that is hovered\n            d3.select(\".\" + d).style(\"opacity\", 1)\n        }\n\n        // And when it is not hovered anymore\n        var noHighlight = function (d) {\n            d3.selectAll(\".myArea\").style(\"opacity\", 1)\n        }\n\n        var legend = d3l.legendColor()\n            .scale(color)\n            .shape('circle')\n            .orient('vertical')\n            .labelOffset(5)\n\n\n        svg.append(\"g\")\n            .attr(\"class\", \"legend\")\n            .attr(\"transform\", \"translate(\" + (width - 80) + \", \" + 20 + \")\")\n            .style(\"font-size\", \"12\")\n\n        svg.select(\".legend\")\n            .call(legend);\n\n\n    }\n\n\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n\n}\n\nexport default AreaChart;\n"]},"metadata":{},"sourceType":"module"}