{"ast":null,"code":"import _slicedToArray from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/aditya/Dropbox/Wesbite/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React from'react';import clsx from'clsx';import WaffleChart from'./d3/WaffleChart';import{Box,Button,Card,CardContent,CardHeader,Divider,useTheme,makeStyles,colors}from'@material-ui/core';import ArrowDropDownIcon from'@material-ui/icons/ArrowDropDown';import ArrowRightIcon from'@material-ui/icons/ArrowRight';import CircularProgress from'@material-ui/core/CircularProgress';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';var selectordata=[[12,18],[18,21],[22,35],[36,55],[55,65],[65,75],[75,100]];var useStyles=makeStyles(function(){return{root:{}};});function waffleData(dataset,selector){var arr=[];dataset.forEach(function(d){d.values.forEach(function(e){var o={};o.diagnosis=d.diagnosis;o.age=e.age;o.total=e.value;arr.push(o);});});console.log(\"arr\",arr);console.log(selectordata[selector][0]);console.log(selectordata[selector][1]);var arr_filtered=arr.filter(function(e){return e.age>=selectordata[selector][0]&&e.age<=selectordata[selector][1];});console.log(arr_filtered);var output=[];arr_filtered.forEach(function(item){var exist=output.filter(function(v,i){return v.diagnosis==item.diagnosis;});if(exist.length){var index=output.indexOf(exist[0]);var total=output[index].total+item.total;Object.assign(output[index],item);output[index].total=total;}else{if(typeof item.value=='string'){item.value=[item.value];}output.push(item);}});console.log(\"output\",output);var output_zero=output.filter(function(e){return e.total!=0;});console.log(\"output2\",output_zero);return output_zero;}var DiagnosesWaffleChart=function DiagnosesWaffleChart(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,[\"className\"]);var classes=useStyles();var theme=useTheme();var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState(0),_React$useState6=_slicedToArray(_React$useState5,2),selector=_React$useState6[0],setSelector=_React$useState6[1];React.useEffect(function(){var apiUrl='https://raw.githubusercontent.com/adityanz/healthcare-dashboard/master/src/data/substance_abuse.json';fetch(apiUrl).then(function(response){return response.json();}).then(function(result){// setData(waffleData(result, selector));\nsetData(result);setLoading(false);});},[]);var handleChange=function handleChange(event){// setLoading(true);\nsetSelector(event.target.value);};return/*#__PURE__*/React.createElement(Card,Object.assign({className:clsx(classes.root,className)},rest),/*#__PURE__*/React.createElement(CardHeader,{action:/*#__PURE__*/React.createElement(Select,{endIcon:/*#__PURE__*/React.createElement(ArrowDropDownIcon,null),value:selector,onChange:handleChange},/*#__PURE__*/React.createElement(MenuItem,{value:0},selectordata[0][0]+\" - \"+selectordata[0][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:1},selectordata[1][0]+\" - \"+selectordata[1][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:2},selectordata[2][0]+\" - \"+selectordata[2][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:3},selectordata[3][0]+\" - \"+selectordata[3][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:4},selectordata[4][0]+\" - \"+selectordata[4][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:5},selectordata[5][0]+\" - \"+selectordata[5][1]+\" Age Range\"),/*#__PURE__*/React.createElement(MenuItem,{value:6},selectordata[6][0]+\" - \"+selectordata[6][1]+\" Age Range\")),title:\"Drug Admittance Distribution\"}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardContent,{id:\"wc\"},!loading?/*#__PURE__*/React.createElement(WaffleChart,{data:data,selector:selector,size:[800,200]}):/*#__PURE__*/React.createElement(CircularProgress,null)),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"flex-end\",p:2}));};export default DiagnosesWaffleChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Wesbite/dashboard/src/views/dashboard/DashboardView/DiagnosesWaffleChart.js"],"names":["React","clsx","WaffleChart","Box","Button","Card","CardContent","CardHeader","Divider","useTheme","makeStyles","colors","ArrowDropDownIcon","ArrowRightIcon","CircularProgress","Select","MenuItem","selectordata","useStyles","root","waffleData","dataset","selector","arr","forEach","d","values","e","o","diagnosis","age","total","value","push","console","log","arr_filtered","filter","output","item","exist","v","i","length","index","indexOf","Object","assign","output_zero","DiagnosesWaffleChart","className","rest","classes","theme","useState","loading","setLoading","data","setData","setSelector","useEffect","apiUrl","fetch","then","response","json","result","handleChange","event","target"],"mappings":"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","sourcesContent":["import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport WaffleChart from './d3/WaffleChart';\nimport {\n    Box,\n    Button,\n    Card,\n    CardContent,\n    CardHeader,\n    Divider,\n    useTheme,\n    makeStyles,\n    colors\n} from '@material-ui/core';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nlet selectordata = [[12, 18], [18, 21], [22, 35], [36, 55], [55, 65], [65, 75], [75, 100]\n];\n\nconst useStyles = makeStyles(() => ({\n    root: {}\n}));\n\nfunction waffleData(dataset,selector){\n    let arr = []\n\n    dataset.forEach(function (d) {\n        d.values.forEach(function (e) {\n            let o = {}\n            o.diagnosis = d.diagnosis\n            o.age = e.age\n            o.total = e.value\n            arr.push(o)\n        })\n    });\n    console.log(\"arr\", arr)\n    console.log(selectordata[selector][0])\n    console.log(selectordata[selector][1])\n\n    let arr_filtered = arr.filter(function (e) {\n        return e.age >= selectordata[selector][0] && e.age <= selectordata[selector][1];\n    });\n    console.log(arr_filtered)\n    let output = []\n\n    arr_filtered.forEach(function (item) {\n        var exist = output.filter(function (v, i) {\n            return v.diagnosis == item.diagnosis\n        });\n        if (exist.length) {\n            var index = output.indexOf(exist[0]);\n            var total = output[index].total + item.total;\n            Object.assign(output[index], item);\n            output[index].total = total;\n        } else {\n            if (typeof item.value == 'string') {\n                item.value = [item.value];\n            }\n            output.push(item);\n        }\n    });\n    console.log(\"output\", output)\n    let output_zero = output.filter(function (e) {\n        return e.total != 0;\n    });\n    console.log(\"output2\", output_zero)\n    return output_zero\n}\n\nconst DiagnosesWaffleChart = ({ className, ...rest }) => {\n    const classes = useStyles();\n    const theme = useTheme();\n\n    let [loading, setLoading] = React.useState(true);\n    let [data, setData] = React.useState([]);\n    let [selector, setSelector] = React.useState(0);\n\n    React.useEffect(() => {\n        let apiUrl = 'https://raw.githubusercontent.com/adityanz/healthcare-dashboard/master/src/data/substance_abuse.json';\n        fetch(apiUrl)\n            .then((response) => response.json())\n            .then(result => {\n                // setData(waffleData(result, selector));\n                setData(result);\n                setLoading(false);\n            })\n    }, [])\n\n    const handleChange = (event) => {\n        // setLoading(true);\n        setSelector(event.target.value);\n    };\n\n    return (\n        <Card\n            className={clsx(classes.root, className)}\n            {...rest}\n        >\n            <CardHeader\n                action={(\n                    <Select\n                        endIcon={<ArrowDropDownIcon />}\n                        value={selector}\n                        onChange={handleChange}\n                    >\n                        <MenuItem value={0}>{selectordata[0][0] + \" - \" + selectordata[0][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={1}>{selectordata[1][0] + \" - \" + selectordata[1][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={2}>{selectordata[2][0] + \" - \" + selectordata[2][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={3}>{selectordata[3][0] + \" - \" + selectordata[3][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={4}>{selectordata[4][0] + \" - \" + selectordata[4][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={5}>{selectordata[5][0] + \" - \" + selectordata[5][1] + \" Age Range\"}</MenuItem>\n                        <MenuItem value={6}>{selectordata[6][0] + \" - \" + selectordata[6][1] + \" Age Range\"}</MenuItem>\n                    </Select>\n                )}\n                title=\"Drug Admittance Distribution\"\n            />\n            <Divider />\n            <CardContent id={\"wc\"}>\n                {/* <Box\n          id={\"gbc\"}\n          height={400}\n          position=\"relative\"\n        > */}\n                {!loading ? <WaffleChart data={data} selector={selector} size={[800, 200]} /> : <CircularProgress />}\n                {/* </Box> */}\n            </CardContent>\n            <Divider />\n            <Box\n                display=\"flex\"\n                justifyContent=\"flex-end\"\n                p={2}\n            >\n                {/* <Button\n          color=\"primary\"\n          endIcon={<ArrowRightIcon />}\n          size=\"small\"\n          variant=\"text\"\n        >\n          Overview\n        </Button> */}\n            </Box>\n        </Card>\n    );\n};\n\nDiagnosesWaffleChart.propTypes = {\n    className: PropTypes.string\n};\n\nexport default DiagnosesWaffleChart;\n"]},"metadata":{},"sourceType":"module"}