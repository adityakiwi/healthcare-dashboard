{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import{range}from'd3';var BubbleChart=/*#__PURE__*/function(_React$Component){_inherits(BubbleChart,_React$Component);var _super=_createSuper(BubbleChart);function BubbleChart(props){var _this;_classCallCheck(this,BubbleChart);_this=_super.call(this,props);_this.removeExistingBubbles=_this.removeExistingBubbles.bind(_assertThisInitialized(_this));_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));_this.state={svg:null,width:null,height:null};return _this;}_createClass(BubbleChart,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var diameter=600;var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#bc\").select(\"svg\").attr(\"width\",diameter).attr(\"height\",diameter).attr(\"class\",\"bubble\");this.setState({svg:svg});this.setState({width:width});this.setState({height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeExistingBubbles();this.createBarChart();}},{key:\"midpoint\",value:function midpoint(range){return range[0]+(range[1]-range[0])/2.0;}},{key:\"removeExistingBubbles\",value:function removeExistingBubbles(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createBarChart\",value:function createBarChart(){var svg=this.state.svg;var width=this.state.width;var height=this.state.height;var rawdata=this.props.data;console.log(rawdata);var dataset={\"children\":[]};console.log(dataset);console.log(typeof dataset);var _iterator=_createForOfIteratorHelper(rawdata),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;var key=Object.values(val)[0];var theval=Object.values(Object.values(val)[1][0])[0];dataset[\"children\"].push({Name:key,Count:theval});}}catch(err){_iterator.e(err);}finally{_iterator.f();}console.log(dataset);var diameter=300;var color=d3.scaleOrdinal(d3.schemeCategory10);var bubble=d3.pack(dataset).size([diameter,diameter]).padding(1.5);var nodes=d3.hierarchy(dataset).sum(function(d){return d.Count;});var diameter=600;var color=d3.scaleOrdinal(d3.schemeCategory10);var bubble=d3.pack(dataset).size([diameter,diameter]).padding(1.5);var nodes=d3.hierarchy(dataset).sum(function(d){return d.Count;});var node=svg.selectAll(\".node\").data(bubble(nodes).descendants()).enter().filter(function(d){return!d.children;}).append(\"g\").attr(\"class\",function(d){{console.log(d.data.Name);}return d.data.name;}).attr(\"transform\",function(d){return\"translate(\"+d.x+\",\"+d.y+\")\";});node.append(\"circle\").attr(\"r\",function(d){return d.r;}).style(\"fill\",function(d,i){return color(i);});node.append(\"text\").attr(\"dy\",\".2em\").style(\"text-anchor\",\"middle\").text(function(d){return d.data.Name.substring(0,d.r/3);}).attr(\"font-family\",\"sans-serif\").attr(\"font-size\",function(d){return d.r/5;}).attr(\"fill\",\"white\");node.append(\"text\").attr(\"dy\",\"1.3em\").style(\"text-anchor\",\"middle\").text(function(d){return d.data.Count;}).attr(\"font-family\",\"Gill Sans\",\"Gill Sans MT\").attr(\"font-size\",function(d){return d.r/5;}).attr(\"fill\",\"white\");svg.selectAll(\"circle\").on(\"click\",clicked);function clicked(event,d){if(event.defaultPrevented)return;// dragged\nd3.select(this).transition().attr(console.log(this)).attr(\"fill\",\"black\").attr(\"r\",d.r*2).transition().attr(\"r\",d.r).attr(\"fill\",d3.schemeCategory10[d.index%10]);}// var zoom = d3.zoom()\n//     .scaleExtent([1, 8])\n//     .on('zoom', function (event) {\n//             svg.attr('transform', event.transform)\n//     });\n// svg.call(zoom);\nfunction mouseover(){d3.select(this).attr(\"opacity\",.5);}function mouseout(){d3.select(this).attr(\"opacity\",1);}function zoomed(_ref){var transform=_ref.transform;nodes.attr(\"transform\",transform);}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return BubbleChart;}(React.Component);export default BubbleChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/BubbleChart.js"],"names":["React","d3","range","BubbleChart","props","removeExistingBubbles","bind","createBarChart","state","svg","width","height","owidth","size","oheight","diameter","margin","top","right","bottom","left","select","attr","setState","selectAll","remove","rawdata","data","console","log","dataset","val","key","Object","values","theval","push","Name","Count","color","scaleOrdinal","schemeCategory10","bubble","pack","padding","nodes","hierarchy","sum","d","node","descendants","enter","filter","children","append","name","x","y","r","style","i","text","substring","on","clicked","event","defaultPrevented","transition","index","mouseover","mouseout","zoomed","transform","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\n\nclass BubbleChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBubbles = this.removeExistingBubbles.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            width: null,\n            height: null,\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n        var diameter = 600;\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#bc\").select(\"svg\")\n            .attr(\"width\", diameter)\n            .attr(\"height\", diameter)\n            .attr(\"class\", \"bubble\");\n\n        this.setState({ svg });\n        this.setState({ width });\n        this.setState({ height });\n\n    }\n    componentDidUpdate() {\n        this.removeExistingBubbles();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBubbles() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n\n        const rawdata = this.props.data\n\n        console.log(rawdata)\n\n        let dataset = {\n            \"children\": []\n        };\n\n        console.log(dataset)\n        console.log(typeof (dataset))\n\n        for (var val of rawdata) {\n            let key = Object.values(val)[0]\n            let theval = Object.values(Object.values(val)[1][0])[0]\n\n            dataset[\"children\"].push({\n                Name: key,\n                Count: theval\n            })\n        }\n        console.log(dataset)\n\n        var diameter = 300;\n        var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n        var bubble = d3.pack(dataset)\n            .size([diameter, diameter])\n            .padding(1.5);\n\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var diameter = 600;\n        var color = d3.scaleOrdinal(d3.schemeCategory10);\n\n        var bubble = d3.pack(dataset)\n            .size([diameter, diameter])\n            .padding(1.5);\n\n        var nodes = d3.hierarchy(dataset)\n            .sum(function (d) { return d.Count; });\n\n        var node = svg.selectAll(\".node\")\n            .data(bubble(nodes).descendants())\n            .enter()\n            .filter(function (d) {\n                return !d.children\n            })\n            .append(\"g\")\n            .attr(\"class\", function (d) {\n                {console.log(d.data.Name)}return d.data.name;\n            })\n            .attr(\"transform\", function (d) {\n                return \"translate(\" + d.x + \",\" + d.y + \")\";\n            })\n            \n        node.append(\"circle\")\n            .attr(\"r\", function (d) {\n                return d.r;\n            })\n            .style(\"fill\", function (d, i) {\n                return color(i);\n            });\n\n        node.append(\"text\")\n            .attr(\"dy\", \".2em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Name.substring(0, d.r / 3);\n            })\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        node.append(\"text\")\n            .attr(\"dy\", \"1.3em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(function (d) {\n                return d.data.Count;\n            })\n            .attr(\"font-family\", \"Gill Sans\", \"Gill Sans MT\")\n            .attr(\"font-size\", function (d) {\n                return d.r / 5;\n            })\n            .attr(\"fill\", \"white\");\n\n        \n        svg.selectAll(\"circle\").on(\"click\", clicked);\n\n        function clicked(event, d) {\n            if (event.defaultPrevented) return; // dragged\n\n            d3.select(this).transition()\n                .attr(console.log(this))\n                .attr(\"fill\", \"black\")\n                .attr(\"r\", d.r * 2)\n                .transition()\n                .attr(\"r\", d.r)\n                .attr(\"fill\", d3.schemeCategory10[d.index % 10]);\n        }\n\n        // var zoom = d3.zoom()\n        //     .scaleExtent([1, 8])\n        //     .on('zoom', function (event) {\n        //             svg.attr('transform', event.transform)\n\n        //     });\n\n        // svg.call(zoom);\n\n        function mouseover() {\n            d3.select(this).attr(\"opacity\", .5)\n\n        }\n\n        function mouseout() {\n            d3.select(this).attr(\"opacity\", 1);\n        }\n\n        function zoomed({ transform }) {\n            nodes.attr(\"transform\", transform);\n        }\n\n\n    }\n\n\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n\n}\n\nexport default BubbleChart;\n"]},"metadata":{},"sourceType":"module"}