{"ast":null,"code":"var _jsxFileName = \"/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/StackedBarChart.js\";\nimport React from 'react';\nimport * as d3 from 'd3';\nimport * as d3l from 'd3-svg-legend';\nimport './StackedBarChart.css';\n\nclass StackedBarChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.removeExistingBars = this.removeExistingBars.bind(this);\n    this.createBarChart = this.createBarChart.bind(this);\n    this.state = {\n      svg: null,\n      div: null\n    };\n  }\n\n  componentDidMount() {\n    const owidth = this.props.size[0];\n    const oheight = this.props.size[1];\n    var margin = {\n      top: 20,\n      right: 0,\n      bottom: 20,\n      left: 70\n    },\n        width = owidth - margin.left - margin.right,\n        height = oheight - margin.top - margin.bottom;\n    const svg = d3.select(\"body\").select(\"#sb\").select(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    const div = d3.select(\"body\").append(\"div\").attr(\"class\", \"tooltip-donut\").style(\"opacity\", 0);\n    this.setState({\n      svg,\n      div,\n      width,\n      height\n    });\n  }\n\n  componentDidUpdate() {\n    this.removeExistingBars();\n    this.createBarChart();\n  }\n\n  midpoint(range) {\n    return range[0] + (range[1] - range[0]) / 2.0;\n  }\n\n  removeExistingBars() {\n    const {\n      svg\n    } = this.state;\n    svg.selectAll(\"*\").remove();\n  }\n\n  createBarChart() {\n    const {\n      svg\n    } = this.state;\n    const {\n      div\n    } = this.state;\n    const owidth = this.props.size[0];\n    const oheight = this.props.size[1];\n    const selector = this.props.selector;\n    var margin = {\n      top: 20,\n      right: 0,\n      bottom: 20,\n      left: 70\n    },\n        width = owidth - margin.left - margin.right,\n        height = oheight - margin.top - margin.bottom;\n    let output = this.props.data;\n    var yScale = d3.scaleBand().range([margin.top, height - margin.bottom]).padding(0.1).paddingOuter(0.2).rangeRound([0, height]).align(0.1);\n    var xScale = d3.scaleLinear().rangeRound([0, width]);\n    var zScale = d3.scaleOrdinal(d3.schemeCategory10);\n    var keys = [\"Government\", \"Medicaid\", \"Medicare\", \"Private\", \"Self Pay\"];\n    xScale.domain([0, 1700]);\n    yScale.domain(output.map(function (d) {\n      return d.disease;\n    }));\n    zScale.domain(keys);\n    console.log(\"keys\");\n    console.log(keys);\n    console.log(\"output\");\n    console.log(output);\n    console.log(\"d3\");\n    console.log(d3.stack().keys(keys)(output));\n    svg.attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    svg.append(\"g\").attr(\"class\", \"axis\").style(\"stroke\", \"lightslategray\").call(d3.axisLeft(yScale).ticks(null, \"s\"));\n    svg.append(\"g\").attr(\"class\", \"axis\").attr(\"transform\", \"translate(0,\" + height + \")\").style(\"stroke\", \"lightslategray\").call(d3.axisBottom(xScale).ticks(16, \"f\"));\n    svg.append(\"g\").selectAll(\"g\").data(d3.stack().keys(keys)(output)).enter().append(\"g\").attr(\"fill\", function (d) {\n      return zScale(d.key);\n    }).selectAll(\"rect\").data(function (d) {\n      {\n        console.log(\"stacked\", d);\n      }\n      return d;\n    }).enter().append(\"rect\").attr(\"y\", function (d) {\n      {\n        console.log(\"y\", d);\n      }\n      return yScale(d.data.disease);\n    }).attr(\"x\", function (d) {\n      {\n        console.log(\"x\", d);\n      }\n      return xScale(d[0]);\n    }).attr(\"height\", function (d) {\n      return yScale.bandwidth();\n    }).on(\"mouseover\", function (event, d) {\n      d3.select(this).transition().duration('50').attr('opacity', .50);\n      console.log(d, event); /// add to html\n\n      div.transition().duration(50).style(\"opacity\", 1);\n      let key = Object.keys(d.data).find(key => d.data[key] === d[1] - d[0]);\n      div.html(\" Insurance: \" + key + \"<br>\" + \"Total Number of Alarms: \" + (d[1] - d[0])).style(\"left\", event.pageX - 30 + \"px\").style(\"top\", event.pageY - 15 + \"px\");\n    }).on(\"mouseout\", function (d) {\n      d3.select(this).transition().duration('50').attr('opacity', 1);\n      div.transition().duration('50').style(\"opacity\", 0);\n    }).transition().duration(2000) //time in ms\n    .attr(\"width\", function (d) {\n      return xScale(d[1]) - xScale(d[0]);\n    });\n    var legend = d3l.legendColor().scale(zScale).shape('circle').orient('vertical');\n    svg.append(\"g\").attr(\"class\", \"legend\").attr(\"transform\", \"translate(\" + (width - 350) + \", \" + 20 + \")\");\n    svg.select(\".legend\").call(legend);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    });\n  }\n\n}\n\nexport default StackedBarChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/StackedBarChart.js"],"names":["React","d3","d3l","StackedBarChart","Component","constructor","props","removeExistingBars","bind","createBarChart","state","svg","div","componentDidMount","owidth","size","oheight","margin","top","right","bottom","left","width","height","select","attr","append","style","setState","componentDidUpdate","midpoint","range","selectAll","remove","selector","output","data","yScale","scaleBand","padding","paddingOuter","rangeRound","align","xScale","scaleLinear","zScale","scaleOrdinal","schemeCategory10","keys","domain","map","d","disease","console","log","stack","call","axisLeft","ticks","axisBottom","enter","key","bandwidth","on","event","transition","duration","Object","find","html","pageX","pageY","legend","legendColor","scale","shape","orient","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport * as d3l from 'd3-svg-legend'\nimport './StackedBarChart.css'\n\nclass StackedBarChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBars = this.removeExistingBars.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null,\n            div: null\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 0, bottom: 20, left: 70 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#sb\").select(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n        const div = d3.select(\"body\").append(\"div\")\n            .attr(\"class\", \"tooltip-donut\")\n            .style(\"opacity\", 0);\n\n        this.setState({ svg, div, width, height });\n    }\n    componentDidUpdate() {\n        this.removeExistingBars();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBars() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const { div } = this.state;\n\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        const selector = this.props.selector\n\n        var margin = { top: 20, right: 0, bottom: 20, left: 70 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        let output = this.props.data\n\n  \n        var yScale = d3.scaleBand()\n            .range([margin.top, height - margin.bottom])\n            .padding(0.1)\n            .paddingOuter(0.2)\n            .rangeRound([0, height])\n            .align(0.1);\n\n        var xScale = d3.scaleLinear()\n            .rangeRound([0, width]);\n\n        var zScale = d3.scaleOrdinal(d3.schemeCategory10)\n\n\n\n        var keys = [\"Government\", \"Medicaid\", \"Medicare\", \"Private\", \"Self Pay\"]\n        xScale.domain([0, 1700])\n\n\n        yScale.domain(output.map(function (d) { return d.disease; }));\n\n        zScale.domain(keys)\n\n        console.log(\"keys\")\n        console.log(keys)\n\n\n        console.log(\"output\")\n        console.log(output)\n\n        console.log(\"d3\")\n        console.log(d3.stack().keys(keys)(output))\n\n        svg.attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n        svg.append(\"g\")\n            .attr(\"class\", \"axis\")\n            .style(\"stroke\", \"lightslategray\")\n            .call(d3.axisLeft(yScale).ticks(null, \"s\"));\n        svg.append(\"g\")\n            .attr(\"class\", \"axis\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .style(\"stroke\", \"lightslategray\")\n            .call(d3.axisBottom(xScale).ticks(16, \"f\"));\n\n        svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(d3.stack().keys(keys)(output))\n            .enter().append(\"g\")\n            .attr(\"fill\", function (d) { return zScale(d.key) })\n            .selectAll(\"rect\").data(function (d) { { console.log(\"stacked\", d) } return d; })\n            .enter().append(\"rect\")\n            .attr(\"y\", function (d) { { console.log(\"y\", d) } return yScale(d.data.disease) })\n            .attr(\"x\", function (d) { { console.log(\"x\", d) } return xScale(d[0]) })\n            .attr(\"height\", function (d) {\n                return yScale.bandwidth()\n            })\n            .on(\"mouseover\", function (event, d) {\n                d3.select(this).transition()\n                    .duration('50')\n                    .attr('opacity', .50);\n                console.log(d, event)\n                /// add to html\n                div.transition()\n                    .duration(50)\n                    .style(\"opacity\", 1)\n                let key = Object.keys(d.data).find(key => d.data[key] === d[1] - d[0]);\n\n                div.html(\" Insurance: \" + key + \"<br>\" + \"Total Number of Alarms: \" + (d[1] - d[0]))\n                    .style(\"left\", (event.pageX - 30) + \"px\")\n                    .style(\"top\", (event.pageY - 15) + \"px\")\n\n            })\n            .on(\"mouseout\", function (d) {\n                d3.select(this).transition()\n                    .duration('50')\n                    .attr('opacity', 1)\n                div.transition()\n                    .duration('50')\n                    .style(\"opacity\", 0)\n            })\n            .transition()\n            .duration(2000)//time in ms\n            .attr(\"width\", function (d) {\n                return xScale(d[1]) - xScale(d[0])\n            })\n\n        var legend = d3l.legendColor()\n            .scale(zScale)\n            .shape('circle')\n            .orient('vertical')\n\n\n        svg.append(\"g\")\n            .attr(\"class\", \"legend\")\n            .attr(\"transform\", \"translate(\" + (width - 350) + \", \" + 20 + \")\");\n\n\n        svg.select(\".legend\")\n            .call(legend);\n\n\n    }\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n}\n\nexport default StackedBarChart;\n"]},"metadata":{},"sourceType":"module"}