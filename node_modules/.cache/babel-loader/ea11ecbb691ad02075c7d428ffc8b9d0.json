{"ast":null,"code":"import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import{range}from'd3';var TreeMap=/*#__PURE__*/function(_React$Component){_inherits(TreeMap,_React$Component);var _super=_createSuper(TreeMap);function TreeMap(props){var _this;_classCallCheck(this,TreeMap);_this=_super.call(this,props);_this.removeMap=_this.removeMap.bind(_assertThisInitialized(_this));_this.createMap=_this.createMap.bind(_assertThisInitialized(_this));_this.state={svg:null,div:null,width:null,height:null};return _this;}_createClass(TreeMap,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#tm\").select(\"svg\").attr(\"width\",width).attr(\"height\",height);this.setState({svg:svg});this.setState({width:width});this.setState({height:height});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeMap();this.createMap();}},{key:\"removeMap\",value:function removeMap(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createMap\",value:function createMap(){var svg=this.state.svg;var width=this.state.width;var height=this.state.height;var tooltip=d3.select(\"body\").select(\"#bc\").append(\"div\").style(\"position\",\"absolute\").style(\"z-index\",\"10\").style(\"visibility\",\"hidden\").style(\"color\",\"white\").style(\"padding\",\"8px\").style(\"background-color\",\"rgba(0, 0, 0, 0.75)\").style(\"border-radius\",\"6px\").style(\"font\",\"12px sans-serif\").text(\"tooltip\");var rawdata=this.props.data;var dataset={name:\"q8\",\"children\":[]};rawdata.forEach(function(d){dataset[\"children\"].push({name:d.diagnosis,children:d.values});});var data=dataset;console.log(data);var hierarchy=d3.hierarchy(data).sum(function(d){return d.value;})//sum every child's values\n.sort(function(a,b){return b.value-a.value;});// and sort them in descending order \nvar treemap=d3.treemap().size([width,height])// width: 400px, height:450px\n.padding(1);// set padding to 1\nvar categories=dataset.children.map(function(d){return d.name;});var root=treemap(hierarchy);var colors=['#1C1832','#9E999D','#F2259C','#347EB4','#08ACB6','#91BB91','#BCD32F','#75EDB8',\"#89EE4B\",'#AD4FE8','#D5AB61','#BC3B3A','#F6A1F9','#87ABBB','#412433','#56B870','#FDAB41','#64624F'];var colorScale=d3.scaleOrdinal()// the scale function\n.domain(categories)// the data\n.range(colors);// the way the data should be shown\nsvg.selectAll(\"rect\").data(root.leaves()).enter().append(\"rect\").attr(\"x\",function(d){return d.x0;}).attr(\"y\",function(d){return d.y0;}).attr(\"width\",function(d){return d.x1-d.x0;}).attr(\"height\",function(d){return d.y1-d.y0;}).attr(\"fill\",function(d){return colorScale(d.data.value);}).attr(\"font-size\",\"15px\");svg.selectAll('text').data(root.leaves()).enter().append('text').selectAll('tspan').data(function(d){{console.log(d.parent.data.name);}return d.parent.data.name.split(/(?=[A-Z][^A-Z])/g).// split the name of movie\nmap(function(v){{console.log(v);}return{text:v,x0:d.x0,// keep x0 reference\ny0:d.y0// keep y0 reference\n};});}).enter().append('tspan').attr(\"x\",function(d){return d.x0+5;}).attr(\"y\",function(d,i){return d.y0+15+i*2;})// offset by index \n.text(function(d){return d.text;}).attr(\"font-size\",\"0.5em\").attr(\"fill\",\"white\");svg.selectAll('rect').on(\"mouseover\",function(d){{console.log(d.path[0].__data__.parent.data.name+\": \"+d.path[0].__data__.data.value);}tooltip.text(d.path[0].__data__.parent.data.name+\": \"+d.path[0].__data__.data.value);tooltip.style(\"visibility\",\"visible\");}).on(\"mousemove\",function(event,d){return tooltip.style(\"top\",event.pageY-10+\"px\").style(\"left\",event.pageX+10+\"px\");}).on(\"mouseout\",function(){return tooltip.style(\"visibility\",\"hidden\");});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"svg\",null);}}]);return TreeMap;}(React.Component);export default TreeMap;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/TreeMap.js"],"names":["React","d3","range","TreeMap","props","removeMap","bind","createMap","state","svg","div","width","height","owidth","size","oheight","margin","top","right","bottom","left","select","attr","setState","selectAll","remove","tooltip","append","style","text","rawdata","data","dataset","name","forEach","d","push","diagnosis","children","values","console","log","hierarchy","sum","value","sort","a","b","treemap","padding","categories","map","root","colors","colorScale","scaleOrdinal","domain","leaves","enter","x0","y0","x1","y1","parent","split","v","i","on","path","__data__","event","pageY","pageX","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport { range } from 'd3';\n\nclass TreeMap extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeMap = this.removeMap.bind(this);\n        this.createMap = this.createMap.bind(this)\n        this.state = {\n            svg: null,\n            div: null,\n            width: null,\n            height: null,\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#tm\").select(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n\n        this.setState({ svg });\n\n        this.setState({ width });\n        this.setState({ height });\n\n    }\n    componentDidUpdate() {\n        this.removeMap();\n        this.createMap();\n    }\n\n\n    removeMap() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createMap() {\n        const { svg } = this.state;\n        const { width } = this.state;\n        const { height } = this.state;\n        var tooltip = d3.select(\"body\").select(\"#bc\")\n            .append(\"div\")\n            .style(\"position\", \"absolute\")\n            .style(\"z-index\", \"10\")\n            .style(\"visibility\", \"hidden\")\n            .style(\"color\", \"white\")\n            .style(\"padding\", \"8px\")\n            .style(\"background-color\", \"rgba(0, 0, 0, 0.75)\")\n            .style(\"border-radius\", \"6px\")\n            .style(\"font\", \"12px sans-serif\")\n            .text(\"tooltip\");\n\n        const rawdata = this.props.data\n        let dataset = {\n            name: \"q8\",\n            \"children\": []\n        };\n\n        rawdata.forEach(function (d) {\n            dataset[\"children\"].push({\n                name: d.diagnosis,\n                children: d.values\n            })\n        })\n        let data = dataset\n        console.log(data)\n        const hierarchy = d3.hierarchy(data)\n            .sum(d => d.value)  //sum every child's values\n            .sort((a, b) => b.value - a.value) // and sort them in descending order \n        const treemap = d3.treemap()\n            .size([width, height]) // width: 400px, height:450px\n            .padding(1);      // set padding to 1\n\n        const categories = dataset.children.map(d => d.name);\n\n        const root = treemap(hierarchy);\n        const colors = ['#1C1832', '#9E999D', '#F2259C', '#347EB4',\n            '#08ACB6', '#91BB91', '#BCD32F', '#75EDB8',\n            \"#89EE4B\", '#AD4FE8', '#D5AB61', '#BC3B3A',\n            '#F6A1F9', '#87ABBB', '#412433', '#56B870',\n            '#FDAB41', '#64624F']\n\n        const colorScale = d3.scaleOrdinal() // the scale function\n            .domain(categories) // the data\n            .range(colors)    // the way the data should be shown\n\n        svg.selectAll(\"rect\")\n            .data(root.leaves())\n            .enter()\n            .append(\"rect\")\n            .attr(\"x\", d => d.x0)\n            .attr(\"y\", d => d.y0)\n            .attr(\"width\", d => d.x1 - d.x0)\n            .attr(\"height\", d => d.y1 - d.y0)\n            .attr(\"fill\", d => colorScale(d.data.value))\n            .attr(\"font-size\", \"15px\")\n\n\n        svg.selectAll('text')\n            .data(root.leaves())\n            .enter()\n            .append('text')\n            .selectAll('tspan')\n            .data(d => {\n                { console.log(d.parent.data.name)}\n                return (d.parent.data.name.split(/(?=[A-Z][^A-Z])/g))// split the name of movie\n                    .map(v => {\n                        { console.log(v) }\n                        return {\n                            text: v,\n                            x0: d.x0,                        // keep x0 reference\n                            y0: d.y0                         // keep y0 reference\n                        }\n                    });\n            })\n            .enter()\n            .append('tspan')\n            .attr(\"x\", (d) => d.x0 + 5)\n            .attr(\"y\", (d, i) => d.y0 + 15 + (i * 2))       // offset by index \n            .text((d) => d.text)\n            .attr(\"font-size\", \"0.5em\")\n            .attr(\"fill\", \"white\");\n        \n            svg.selectAll('rect')\n            .on(\"mouseover\", function (d) {\n                { console.log(d.path[0].__data__.parent.data.name + \": \" + d.path[0].__data__.data.value)}\n                tooltip.text(d.path[0].__data__.parent.data.name + \": \" + d.path[0].__data__.data.value);\n                tooltip.style(\"visibility\", \"visible\");\n            })\n            .on(\"mousemove\", function (event, d) {\n                return tooltip.style(\"top\", (event.pageY - 10) + \"px\").style(\"left\", (event.pageX + 10) + \"px\");\n            })\n            .on(\"mouseout\", function () { return tooltip.style(\"visibility\", \"hidden\"); });\n\n\n    }\n\n\n    render() {\n        return (\n            <svg />\n        )\n    }\n\n}\n\nexport default TreeMap;\n"]},"metadata":{},"sourceType":"module"}