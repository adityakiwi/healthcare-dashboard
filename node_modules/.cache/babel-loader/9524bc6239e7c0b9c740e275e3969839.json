{"ast":null,"code":"import _classCallCheck from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/aditya/Dropbox/Senior S1/ST/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import*as d3 from'd3';import*as d3l from'd3-svg-legend';var ParallelCoordinatesChart=/*#__PURE__*/function(_React$Component){_inherits(ParallelCoordinatesChart,_React$Component);var _super=_createSuper(ParallelCoordinatesChart);function ParallelCoordinatesChart(props){var _this;_classCallCheck(this,ParallelCoordinatesChart);_this=_super.call(this,props);_this.removeExistingBars=_this.removeExistingBars.bind(_assertThisInitialized(_this));_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));_this.state={svg:null};return _this;}_createClass(ParallelCoordinatesChart,[{key:\"componentDidMount\",value:function componentDidMount(){var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;var svg=d3.select(\"body\").select(\"#pc\").append(\"svg\").attr(\"width\",width+margin.left+margin.right).attr(\"height\",height+margin.top+margin.bottom).append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");this.setState({svg:svg});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.removeExistingBars();this.createBarChart();}},{key:\"midpoint\",value:function midpoint(range){return range[0]+(range[1]-range[0])/2.0;}},{key:\"removeExistingBars\",value:function removeExistingBars(){var svg=this.state.svg;svg.selectAll(\"*\").remove();}},{key:\"createBarChart\",value:function createBarChart(){var svg=this.state.svg;var dataset=this.props.data;var owidth=this.props.size[0];var oheight=this.props.size[1];var margin={top:20,right:20,bottom:70,left:100},width=owidth-margin.left-margin.right,height=oheight-margin.top-margin.bottom;console.log(\"graphdata\",dataset);var dimensions=[\"Government\",\"Medicaid\",\"Medicare\",\"Private\",\"Self Pay\"];// var dval = dataset[0].values.map(function (d) { return d.distribution; });\n// var dig = dataset[0].values.map(function (d) { return d.value; });\n// console.log(\"diagnoses\", dimensions)\n// console.log(\"distribution\", dval)\n// console.log(\"value\", dig)\nvar color=d3.scaleOrdinal().domain([\"English\",\"Non-English\",\"Male\",\"Female\"]).range([\"#D73F47\",\"#3381E1\",\"#ED7A22\",\"#65A9A3\"]);var y={};var _loop=function _loop(){var name=dimensions[i];y[name]=d3.scaleLinear().domain(d3.extent(dataset,function(d){{console.log(d[name]);}return+d[name];})).range([height,0]);// this basecially defines each of the 4 y axis in a loop based system.\n};for(var i in dimensions){_loop();}// Build the X scale -> it find the best position for each Y axis\nvar x=d3.scalePoint().range([0,width]).padding(1).domain(dimensions);// The path function take a row of the csv as input, and return x and y coordinates of the line to draw for this raw.\nfunction path(d){return d3.line()(dimensions.map(function(p){{console.log(\"d\",d);}{console.log(\"p\",p);}{console.log(\"xp\",x(p));}{console.log(\"yp\",y[p]);}{console.log(\"dp\",d[p]);}{console.log(\"ydp\",y[p](d[p]));}return[x(p),y[p](d[p])];}));}var legend=d3l.legendColor().scale(color).shape('circle').orient('vertical').shapeRadius(3).labelOffset(1);svg.append(\"g\").attr(\"class\",\"legend\").attr(\"transform\",\"translate(\"+(owidth-170)+\", \"+10+\")\").style(\"font-size\",\"8px\");svg.select(\".legend\").call(legend);// Draw the lines\nsvg.selectAll(\"myPath\").data(dataset).enter().append(\"path\").attr(\"class\",function(d){return\"line \"+d.type;})// 2 class for each line: 'line' and the group name\n.attr(\"d\",path).style(\"fill\",\"none\").style(\"stroke\",function(d){return color(d.type);}).style(\"opacity\",0.5).on(\"mouseover\",mouseover).on(\"mouseleave\",mouseout);// Draw the axis:\nsvg.selectAll(\"myAxis\")// For each dimension of the dataset I add a 'g' element:\n.data(dimensions).enter().append(\"g\").attr(\"class\",\"axis\")// I translate this element to its right position on the x axis\n.attr(\"transform\",function(d){return\"translate(\"+x(d)+\")\";})// And I build the axis with the call function\n.each(function(d){d3.select(this).call(d3.axisLeft().ticks(5).scale(y[d]));})// Add axis title\n.append(\"text\").style(\"text-anchor\",\"middle\").attr(\"y\",-9).text(function(d){return d;}).style(\"fill\",\"black\");// svg.select(\"#legend\")\n// svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 130 - 130).attr(\"r\", 6).style(\"fill\", \"#DFB6B7\")\n// svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 160 - 130).attr(\"r\", 6).style(\"fill\", \"#9dbe74\")\n// svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 190 - 130).attr(\"r\", 6).style(\"fill\", \"#7ebdba\")\n// svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 220 - 130).attr(\"r\", 6).style(\"fill\", \"#CBB4DF\")\n// svg.append(\"text\").attr(\"x\", 20).attr(\"y\", -20).text(\"Length of College\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n// svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 140 - 140).text(\"Other\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n// svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 170 - 140).text(\"Four-year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n// svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 200 - 140).text(\"Two-Year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n// svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 230 - 140).text(\"Less than two year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n// const xtitle = svg.append('text')\n//     .attr('class', 'axis-title')\n//     .text(\"Age\");\n// xtitle.attr('text-anchor', 'middle');\n// xtitle.attr('x', xmid);\n// xtitle.attr('y', height + 40);\n// const ytitle = svg.append('text')\n//     .attr('class', 'axis-title')\n//     .text('Distribution')\n// ytitle.attr('x', -240);\n// ytitle.attr('y', -80);\n// ytitle.attr('dy', '1.75ex');\n// ytitle.attr('text-anchor', 'middle');\n// ytitle.attr('transform', 'rotate(-90)');\n// const tooltip = d3\n//     .select('#container')\n//     .append('div')\n//     .attr('class', 'tooltip')\n//     .style('opacity', 0);\nfunction mouseover(d){var selected_specie=d.type;console.log(\"highlighted\",d.type);// first every group turns grey\nd3.selectAll(\".line\").transition().duration(200).style(\"stroke\",\"lightgrey\").style(\"opacity\",\"0.2\");// Second the hovered specie takes its color\nd3.selectAll(\".\"+selected_specie).transition().duration(200).style(\"stroke\",color(selected_specie)).style(\"opacity\",\"1\");}function mouseout(d){d3.selectAll(\".line\").transition().duration(200).delay(1000).style(\"stroke\",function(d){return color(d.type);}).style(\"opacity\",\"1\");}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{ref:this.myRef});}}]);return ParallelCoordinatesChart;}(React.Component);export default ParallelCoordinatesChart;","map":{"version":3,"sources":["/Users/aditya/Dropbox/Senior S1/ST/dashboard/src/views/dashboard/DashboardView/ParallelCoordinates.js"],"names":["React","d3","d3l","ParallelCoordinatesChart","props","removeExistingBars","bind","createBarChart","state","svg","owidth","size","oheight","margin","top","right","bottom","left","width","height","select","append","attr","setState","range","selectAll","remove","dataset","data","console","log","dimensions","color","scaleOrdinal","domain","y","name","i","scaleLinear","extent","d","x","scalePoint","padding","path","line","map","p","legend","legendColor","scale","shape","orient","shapeRadius","labelOffset","style","call","enter","type","on","mouseover","mouseout","each","axisLeft","ticks","text","selected_specie","transition","duration","delay","myRef","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\nimport * as d3l from 'd3-svg-legend'\n\n\nclass ParallelCoordinatesChart extends React.Component {\n    constructor(props) {\n        super(props)\n        this.removeExistingBars = this.removeExistingBars.bind(this);\n        this.createBarChart = this.createBarChart.bind(this)\n        this.state = {\n            svg: null\n        };\n\n    }\n    componentDidMount() {\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        const svg = d3.select(\"body\").select(\"#pc\").append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n        this.setState({ svg });\n    }\n    componentDidUpdate() {\n        this.removeExistingBars();\n        this.createBarChart();\n    }\n\n    midpoint(range) {\n        return range[0] + (range[1] - range[0]) / 2.0;\n    }\n\n    removeExistingBars() {\n        const { svg } = this.state;\n\n        svg.selectAll(\"*\").remove();\n\n    }\n\n    createBarChart() {\n        const { svg } = this.state;\n        const dataset = this.props.data\n        const owidth = this.props.size[0]\n        const oheight = this.props.size[1]\n\n\n        var margin = { top: 20, right: 20, bottom: 70, left: 100 },\n            width = owidth - margin.left - margin.right,\n            height = oheight - margin.top - margin.bottom;\n\n        console.log(\"graphdata\", dataset)\n        var dimensions = [\"Government\", \"Medicaid\", \"Medicare\", \"Private\",\"Self Pay\"]\n\n        // var dval = dataset[0].values.map(function (d) { return d.distribution; });\n        // var dig = dataset[0].values.map(function (d) { return d.value; });\n      \n        // console.log(\"diagnoses\", dimensions)\n        // console.log(\"distribution\", dval)\n        // console.log(\"value\", dig)\n\n        var color = d3.scaleOrdinal()\n            .domain([\"English\", \"Non-English\", \"Male\", \"Female\"])\n            .range([\"#D73F47\", \"#3381E1\", \"#ED7A22\", \"#65A9A3\"])\n\n\n        let y = {}\n        for (var i in dimensions) {\n            let name = dimensions[i]\n            y[name] = d3.scaleLinear()\n                .domain(d3.extent(dataset, function (d) { { console.log(d[name]) } return +d[name]; }))\n                .range([height, 0])\n            // this basecially defines each of the 4 y axis in a loop based system.\n        }\n        // Build the X scale -> it find the best position for each Y axis\n        let x = d3.scalePoint()\n            .range([0, width])\n            .padding(1)\n            .domain(dimensions);\n\n        // The path function take a row of the csv as input, and return x and y coordinates of the line to draw for this raw.\n        function path(d) {\n            return d3.line()(dimensions.map(function (p) { { console.log(\"d\", d) } { console.log(\"p\", p) } { console.log(\"xp\", x(p)) } { console.log(\"yp\", y[p]) } { console.log(\"dp\", (d[p])) } { console.log(\"ydp\", y[p](d[p])) } return [x(p), y[p](d[p])]; }));\n        }\n\n\n\n        var legend = d3l.legendColor()\n            .scale(color)\n            .shape('circle')\n            .orient('vertical')\n            .shapeRadius(3)\n            .labelOffset(1)\n\n        svg.append(\"g\")\n            .attr(\"class\", \"legend\")\n            .attr(\"transform\", \"translate(\" + (owidth - 170) + \", \" + 10 + \")\")\n            .style(\"font-size\", \"8px\")\n\n\n        svg.select(\".legend\")\n            .call(legend);\n\n\n        // Draw the lines\n        svg\n            .selectAll(\"myPath\")\n            .data(dataset)\n            .enter()\n            .append(\"path\")\n            .attr(\"class\", function (d) { return \"line \" + d.type }) // 2 class for each line: 'line' and the group name\n            .attr(\"d\", path)\n            .style(\"fill\", \"none\")\n            .style(\"stroke\", function (d) { return (color(d.type)) })\n            .style(\"opacity\", 0.5)\n            .on(\"mouseover\", mouseover)\n            .on(\"mouseleave\", mouseout)\n\n        // Draw the axis:\n        svg.selectAll(\"myAxis\")\n            // For each dimension of the dataset I add a 'g' element:\n            .data(dimensions).enter()\n            .append(\"g\")\n            .attr(\"class\", \"axis\")\n            // I translate this element to its right position on the x axis\n            .attr(\"transform\", function (d) { return \"translate(\" + x(d) + \")\"; })\n            // And I build the axis with the call function\n            .each(function (d) { d3.select(this).call(d3.axisLeft().ticks(5).scale(y[d])); })\n            // Add axis title\n            .append(\"text\")\n            .style(\"text-anchor\", \"middle\")\n            .attr(\"y\", -9)\n            .text(function (d) { return d; })\n            .style(\"fill\", \"black\")\n\n        // svg.select(\"#legend\")\n        // svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 130 - 130).attr(\"r\", 6).style(\"fill\", \"#DFB6B7\")\n        // svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 160 - 130).attr(\"r\", 6).style(\"fill\", \"#9dbe74\")\n        // svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 190 - 130).attr(\"r\", 6).style(\"fill\", \"#7ebdba\")\n        // svg.append(\"circle\").attr(\"cx\", 10).attr(\"cy\", 220 - 130).attr(\"r\", 6).style(\"fill\", \"#CBB4DF\")\n        // svg.append(\"text\").attr(\"x\", 20).attr(\"y\", -20).text(\"Length of College\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n        // svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 140 - 140).text(\"Other\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n        // svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 170 - 140).text(\"Four-year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n        // svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 200 - 140).text(\"Two-Year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n        // svg.append(\"text\").attr(\"x\", 20).attr(\"y\", 230 - 140).text(\"Less than two year\").style(\"font-size\", \"12px\").attr(\"alignment-baseline\", \"middle\")\n\n\n\n        // const xtitle = svg.append('text')\n        //     .attr('class', 'axis-title')\n        //     .text(\"Age\");\n        // xtitle.attr('text-anchor', 'middle');\n        // xtitle.attr('x', xmid);\n        // xtitle.attr('y', height + 40);\n        // const ytitle = svg.append('text')\n        //     .attr('class', 'axis-title')\n        //     .text('Distribution')\n        // ytitle.attr('x', -240);\n        // ytitle.attr('y', -80);\n        // ytitle.attr('dy', '1.75ex');\n        // ytitle.attr('text-anchor', 'middle');\n        // ytitle.attr('transform', 'rotate(-90)');\n\n        // const tooltip = d3\n        //     .select('#container')\n        //     .append('div')\n        //     .attr('class', 'tooltip')\n        //     .style('opacity', 0);\n\n        function mouseover(d) {\n\n            let selected_specie = d.type\n\n            console.log(\"highlighted\", d.type)\n\n            // first every group turns grey\n            d3.selectAll(\".line\")\n                .transition().duration(200)\n                .style(\"stroke\", \"lightgrey\")\n                .style(\"opacity\", \"0.2\")\n            // Second the hovered specie takes its color\n            d3.selectAll(\".\" + selected_specie)\n                .transition().duration(200)\n                .style(\"stroke\", color(selected_specie))\n                .style(\"opacity\", \"1\")\n        }\n\n        function mouseout(d) {\n            d3.selectAll(\".line\")\n                .transition().duration(200).delay(1000)\n                .style(\"stroke\", function (d) { return (color(d.type)) })\n                .style(\"opacity\", \"1\")            \n        }\n\n    }\n\n\n\n    render() {\n        return (\n            <div ref={this.myRef} />\n        )\n    }\n\n}\n\nexport default ParallelCoordinatesChart;\n"]},"metadata":{},"sourceType":"module"}